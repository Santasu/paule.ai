/* =========================================================
   Paule – Premium Chat UI (light / dark)
   Tipografija liesesnė, ikonų dydžiai mažesni, URL popupai
   ========================================================= */

/* Reset */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;min-height:100vh;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",system-ui,sans-serif;line-height:1.55;overflow:hidden}
img,svg{max-width:100%;height:auto;display:block}

/* Palette (light) */
:root{
  --bg-primary:#ffffff;
  --bg-secondary:#fafafa;
  --bg-elev:#f5f6f8;

  --text-primary:#121317;
  --text-secondary:#4f515a;
  --text-muted:#9aa0a8;

  --border:#e8eaf0;
  --border-2:#f2f3f6;

  --accent:#6f77ff;       /* pastel violet-blue */
  --accent-ghost:#eef0ff;
  --accent-hover:#5b62f2;

  --radius:12px;
  --shadow:0 1px 2px rgba(0,0,0,.05);
  --shadow-lg:0 10px 30px rgba(0,0,0,.08);

  --icon:14px;            /* bazinis ikonų dydis */
  --icon-sm:12px;
}

/* Dark */
[data-theme="dark"]{
  --bg-primary:#0e1116;
  --bg-secondary:#151a22;
  --bg-elev:#1b2230;

  --text-primary:#f3f4f6;
  --text-secondary:#c9cbd4;
  --text-muted:#a1a7b1;

  --border:#283143;
  --border-2:#20283a;

  --accent:#8a96ff;
  --accent-ghost:#1b1f33;
  --accent-hover:#a5afff;
}

body{background:var(--bg-primary);color:var(--text-primary)}

/* ===== Topbar ===== */
.topbar{
  position:sticky;top:0;z-index:200;
  display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:10px;
  height:66px;padding:8px 14px;border-bottom:1px solid var(--border);background:var(--bg-primary);backdrop-filter:blur(8px)
}
.brand-icon{width:68px;height:auto}

.models-in-topbar{display:flex;gap:6px;justify-content:center;align-items:center;overflow-x:auto;scrollbar-width:thin}
.models-in-topbar::-webkit-scrollbar{height:6px}
.models-in-topbar::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}

.model-pill{
  border:1px solid var(--border);
  background:var(--bg-secondary);
  color:var(--text-primary);
  padding:7px 10px;border-radius:999px;font-size:12px;font-weight:600;
  display:inline-flex;align-items:center;gap:6px;cursor:pointer;transition:.15s ease;white-space:nowrap
}
.model-pill img{width:var(--icon);height:var(--icon)}
.model-pill:hover{transform:translateY(-1px);border-color:var(--accent);box-shadow:0 4px 12px rgba(62,70,255,.10)}
.model-pill.active{background:var(--accent-ghost);border-color:var(--accent);color:var(--accent)}

.top-actions{display:flex;gap:6px;align-items:center}
.btn{border:1px solid var(--border);background:var(--bg-secondary);color:var(--text-primary);padding:7px 10px;border-radius:10px;font-weight:600;cursor:pointer;display:inline-flex;gap:6px;align-items:center;transition:.15s}
.btn img{width:var(--icon-sm);height:var(--icon-sm)}
.btn.ghost:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-ghost)}

/* Profile dropdown */
.user-profile{position:relative;display:flex;align-items:center;gap:8px;padding:6px 10px;border:1px solid var(--border);background:var(--bg-secondary);border-radius:10px;cursor:pointer}
.user-avatar{width:22px;height:22px;border-radius:50%;background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700}
.user-name{font-weight:600;font-size:12px}
.profile-dropdown{position:absolute;top:100%;right:0;margin-top:8px;min-width:320px;padding:8px;background:var(--bg-primary);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow-lg);opacity:0;visibility:hidden;transform:translateY(-6px);transition:.2s}
.user-profile:hover .profile-dropdown{opacity:1;visibility:visible;transform:translateY(0)}
.dropdown-item{display:flex;align-items:center;gap:8px;padding:8px;border-radius:10px;color:var(--text-primary)}
.dropdown-item:hover{background:var(--bg-secondary)}
.dropdown-divider{height:1px;background:var(--border);margin:4px 0}
.profile-controls{display:flex;gap:8px;margin-left:auto}
.mini-title{font-size:11px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.3px;margin-bottom:6px}

/* ===== Layout ===== */
.layout{display:grid;grid-template-columns:300px 1fr;height:calc(100vh - 66px);overflow:hidden}

/* Sidebar */
.sidebar{border-right:1px solid var(--border);overflow:auto;background:var(--bg-primary)}
.side-section{padding:12px 14px;border-bottom:1px solid var(--border-2)}
.side-title{font-size:10px;letter-spacing:.5px;text-transform:uppercase;color:var(--text-muted);margin-bottom:8px;font-weight:700}

.specialist-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px}
.chip{
  background:var(--bg-secondary);padding:7px 9px;border-radius:10px;font-size:12px;cursor:pointer;color:var(--text-secondary);
  border:1px solid var(--border);transition:.15s;display:flex;align-items:center;gap:6px;font-weight:600;text-decoration:none
}
.chip img{width:var(--icon-sm);height:var(--icon-sm)}
.chip:hover{color:var(--accent);border-color:var(--accent);background:var(--accent-ghost)}

.community-pings{display:flex;flex-direction:column;gap:6px}
.ping{font-size:11.5px;color:var(--text-secondary);display:flex;gap:6px;align-items:center;padding:7px;border:1px dashed var(--border);border-radius:10px;background:var(--bg-secondary)}
.ping img{width:var(--icon-sm);height:var(--icon-sm)}

.lib-link{color:var(--text-secondary);text-decoration:none;font-weight:700}
.lib-link:hover{color:var(--accent)}
.library-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
.lib-card{
  display:flex;flex-direction:column;align-items:center;gap:6px;padding:8px 6px;border:1px solid var(--border);border-radius:12px;
  background:var(--bg-secondary);text-decoration:none;color:var(--text-secondary);font-size:10.5px;font-weight:600;transition:.15s
}
.lib-card img{width:34px;height:34px;object-fit:contain}
.lib-card:hover{transform:translateY(-1px);border-color:var(--accent);color:var(--accent);background:var(--accent-ghost)}

.project-item{display:flex;align-items:center;gap:8px;padding:9px;border:1px solid var(--border);border-radius:10px;color:var(--text-secondary);cursor:pointer;font-weight:600}
.project-item img{width:var(--icon-sm);height:var(--icon-sm)}
.project-item:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-ghost)}

/* ===== Main / Chat ===== */
.main{display:flex;flex-direction:column;overflow:hidden;background:var(--bg-primary)}
.chat-area{flex:1;overflow:auto;padding:18px;display:flex;flex-direction:column;gap:14px;padding-bottom:230px}

.hero-title{
  font-size:28px;line-height:1.2;margin:4px 0 6px;font-weight:800;text-align:center;
  background:linear-gradient(90deg,#0a0a0a 0%,var(--accent) 75%);-webkit-background-clip:text;background-clip:text;color:transparent
}
.welcome{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:24vh;text-align:center;margin-top:2px}
.welcome p{color:var(--text-secondary);margin-bottom:12px}
.welcome-actions{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
.welcome-btn{padding:8px 12px;border:1px solid var(--border);background:var(--bg-secondary);color:var(--text-primary);border-radius:12px;cursor:pointer;font-size:12px;font-weight:600;display:flex;align-items:center;gap:6px;text-decoration:none}
.welcome-btn img{width:var(--icon-sm);height:var(--icon-sm)}
.welcome-btn:hover{background:var(--accent-ghost);border-color:var(--accent);color:var(--accent)}

.community-strip{display:flex;gap:6px;flex-wrap:wrap;margin-top:10px;justify-content:center}
.strip-item{font-size:11.5px;color:var(--text-secondary);border:1px dashed var(--border);background:var(--bg-secondary);padding:5px 9px;border-radius:999px}

/* Messages – ribotas aukštis su scroll burbuluose */
.message{display:flex;gap:10px;align-items:flex-start}
.avatar{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;border:1px solid var(--border);background:var(--bg-secondary)}
.avatar img{width:16px;height:16px}
.bubble{flex:1;max-width:78%}
.bubble-card{background:var(--bg-secondary);border-radius:14px;padding:12px;border:1px solid var(--border)}
.msg-content{max-height:210px;overflow:auto;font-size:14px}
.msg-content::-webkit-scrollbar{width:6px}
.msg-content::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
.msg-meta{display:flex;gap:6px;color:var(--text-muted);font-size:11.5px;margin-top:5px}
.model-tag{border:1px solid var(--border);background:var(--bg-elev);padding:2px 7px;border-radius:8px}

/* Model tint */
.bubble[data-model="chatgpt"] .bubble-card{border-left:3px solid color-mix(in srgb,#10b981 45%,transparent)}
.bubble[data-model="claude"] .bubble-card{border-left:3px solid color-mix(in srgb,#f59e0b 45%,transparent)}
.bubble[data-model="gemini"] .bubble-card{border-left:3px solid color-mix(in srgb,#4285f4 45%,transparent)}
.bubble[data-model="grok"] .bubble-card{border-left:3px solid color-mix(in srgb,#111 35%,transparent)}
.bubble[data-model="deepseek"] .bubble-card{border-left:3px solid color-mix(in srgb,#8B5E3C 45%,transparent)}
.bubble[data-model="llama"] .bubble-card{border-left:3px solid color-mix(in srgb,#9333EA 45%,transparent)}

/* ===== Bottom input ===== */
.bottom-section{
  position:fixed;left:50%;transform:translateX(-50%);bottom:12px;width:calc(100% - 680px);max-width:880px;
  background:var(--bg-primary);backdrop-filter:blur(8px);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow-lg);z-index:180
}
.input-bar{padding:12px 14px;border-bottom:1px solid var(--border-2)}
.input-container{display:flex;align-items:center;gap:8px;border:1px solid var(--border);background:var(--bg-secondary);border-radius:14px;padding:8px 10px}
.message-input{flex:1;border:none;background:transparent;outline:none;max-height:110px;color:var(--text-primary);font-size:15px}
.send-btn{width:38px;height:38px;border-radius:50%;border:1px solid var(--border);background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer}
.send-btn img{width:18px;height:18px;filter:invert(1)}
.tools-bar{padding:7px 10px;display:flex;gap:6px;align-items:center;justify-content:center;overflow-x:auto;flex-wrap:wrap}
.tool{display:inline-flex;align-items:center;gap:5px;border:1px solid var(--border);background:var(--bg-primary);border-radius:10px;padding:4px 7px;font-size:10.5px;cursor:pointer;color:var(--text-muted);white-space:nowrap;font-weight:600}
.tool img{width:var(--icon-sm);height:var(--icon-sm)}
.tool:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-ghost)}

/* apsauga nuo „gigantiškų“ SVG */
.chat-area img[src$="video-plus.svg"],
.chat-area img[src$="video-library.svg"],
.chat-area img[src$="photo.svg"]{max-width:40px !important;height:auto !important}

/* Select */
.select{border:1px solid var(--border);background:var(--bg-secondary);color:var(--text-primary);border-radius:10px;padding:5px 7px;font-size:12px}

/* URLiniai popupai (juodas fullscreen, vien CSS) */
.popup{position:fixed;inset:0;display:none;background:#000;z-index:3000}
.popup:target{display:block}
.popup-body{position:absolute;inset:0;display:flex;flex-direction:column;max-width:1100px;margin:auto;padding:20px}
.popup-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.popup-head h2{display:flex;align-items:center;gap:10px;color:#fff;font-size:20px;font-weight:700}
.popup-head h2 img{width:18px;height:18px;filter:invert(1)}
.popup-close{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.06)}
.popup-close img{width:14px;height:14px;filter:invert(1)}
.popup-content{flex:1;border:1px solid rgba(255,255,255,.15);border-radius:14px;background:rgba(255,255,255,.05);color:#e8e8e8;padding:16px;overflow:auto}

/* Helpers */
.hidden{display:none !important}

/* Mobile */
@media (max-width:1024px){
  .layout{grid-template-columns:0 1fr}
  .sidebar{position:fixed;left:-320px;top:66px;width:300px;height:calc(100vh - 66px);z-index:180;transition:left .25s ease;background:var(--bg-primary)}
  .sidebar.open{left:0}
  .bottom-section{width:calc(100% - 20px);left:50%;transform:translateX(-50%)}
  .chat-area{padding-bottom:250px}
  .library-grid{grid-template-columns:repeat(2,1fr)}
}
/* ============ PATCH: UI polish & safeguards (2025-09-06) ============ */

/* 0) Bendrai smulkesnė tipografija ir ikonų vienodinimas */
:root{
  --icon-10: 10px;
  --icon-12: 12px;
  --icon-14: 14px;
  --ring-strong: 0 0 0 4px color-mix(in srgb, var(--accent) 24%, transparent);
}
.btn, .chip, .tool, .model-pill, .lib-card, .project-item, .welcome-btn {
  font-weight: 500;           /* buvo 600 – prašei „kūdesnių“ raidžių */
  letter-spacing: .1px;
}
.models-in-topbar img,
.chip img,
.tool img,
.ping img,
.project-item img,
.welcome-btn img {
  width: var(--icon-12);
  height: var(--icon-12);
}

/* Bibliotekos kortelių piktogramos šiek tiek didesnės, bet ne „milžinai“ */
.lib-card img { width: 30px; height: 30px; }

/* 1) Topbar: logotipas ir modelių juosta */
.brand-icon{ width: 56px; height: auto; }   /* mažesnis, kad neliptų ant šonų */
@media (min-width: 1280px){ .brand-icon{ width: 60px; } }

.models-in-topbar { justify-content: center; }
.model-pill{
  padding: 6px 9px;
  font-size: 11.5px;
  border-radius: 999px;
}
.model-pill img{ width: var(--icon-14); height: var(--icon-14); }
.model-pill:hover{ transform: translateY(-1px); }
.model-pill.active{
  background: var(--accent-ghost);
  border-color: var(--accent);
  color: var(--accent);
  box-shadow: var(--ring-strong);
}
.model-pill:focus-visible{
  outline: none;
  box-shadow: var(--ring-strong);
}

/* 2) Sidebar: chips dar ramesni ir vienodo dydžio */
.chip{
  padding: 6px 9px;
  font-size: 11.5px;
}
.side-title{ font-size: 10px; letter-spacing: .45px; }

/* 3) „Sveiki atvykę į paule“ – gradientas iš juodos į pastel violet */
.hero-title{
  background: linear-gradient(90deg, #0b0b0b 0%, var(--accent) 78%);
  -webkit-background-clip: text; background-clip: text; color: transparent;
}

/* 4) Žinučių burbulai – saugikliai prieš milžiniškus SVG ir vienodas scroll */
.msg-content{
  max-height: 210px;
  overflow: auto;
  scrollbar-width: thin;
}
.msg-content::-webkit-scrollbar{ width: 6px; }
.msg-content::-webkit-scrollbar-thumb{ background: var(--border); border-radius: 3px; }

/* Visus SVG chate ribojam iki ikoninio dydžio (kad niekas „nesprogtų“) */
.chat-area img[src$=".svg"]{
  max-width: 40px !important;
  max-height: 40px !important;
  width: 40px !important;
  height: auto !important;
  object-fit: contain;
}

/* ir dar papildoma apsauga būtent probleminiams */
.chat-area img[src$="video-plus.svg"],
.chat-area img[src$="video-library.svg"],
.chat-area img[src$="xAI.svg"],
.chat-area img[src$="grok.svg"]{
  max-width: 40px !important;
  max-height: 40px !important;
}

/* 5) Apatinė įvesties zona – truputį daugiau erdvės chate */
.chat-area{ padding-bottom: 250px; }  /* buvo ~230; kad tools neužliptų */
.bottom-section{ z-index: 300; }      /* visad virš turinio */

/* Įrankių juosta – smulkesnė tipografija ir ikonėlės */
.tool{ font-size: 10.5px; }
.tool img{ width: var(--icon-12); height: var(--icon-12); }

/* 6) Aktyvumo blokai – vienodas tankis */
.ping{ font-size: 11.5px; padding: 6px 8px; }

/* 7) Accessible focus visiems „paspaudžiamiems“ elementams */
a:focus-visible, button:focus-visible, .chip:focus-visible, .btn:focus-visible, .tool:focus-visible, .model-pill:focus-visible{
  outline: none;
  box-shadow: var(--ring-strong);
}

/* 8) URL popupai: maksimalus kontrastas ir švaresni kraštai */
.popup{ background: #000; }
.popup-content{
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.16);
  border-radius: 16px;
}

/* 9) Tamsi tema – švelnesnės pastelės */
[data-theme="dark"] .model-pill.active{
  background: color-mix(in srgb, var(--accent) 14%, transparent);
  color: #fff;
}

/* 10) Extra – jei naršyklė nepalaiko color-mix, vis dar atrodys gerai */
@supports not (color: color-mix(in srgb, #000 50%, #fff 50%)){
  .bubble[data-model="chatgpt"] .bubble-card{ border-left: 3px solid #10b98133; }
  .bubble[data-model="claude"] .bubble-card{ border-left: 3px solid #f59e0b33; }
  .bubble[data-model="gemini"] .bubble-card{ border-left: 3px solid #4285f433; }
  .bubble[data-model="grok"]   .bubble-card{ border-left: 3px solid #11111133; }
  .bubble[data-model="deepseek"] .bubble-card{ border-left: 3px solid #8B5E3C33; }
  .bubble[data-model="llama"] .bubble-card{ border-left: 3px solid #9333EA33; }
}
/* =========================
   Paule – papildymai (patch)
   ========================= */

/* topbar — „nepjaustyti“ hover, logotipo poslinkis ir +20% dydis */
.topbar{
  overflow: visible;              /* niekas „nepjausto“ hover */
}
.brand{ margin-left: clamp(40px, 8vw, 120px); }   /* ~5 cm desktop efektas */
.brand-icon{ width: 82px; height: auto; }        /* +20% nuo 68px */

/* modelių juosta viršuje */
#modelsBar{
  position: relative;
  z-index: 201;
  overflow: visible;
  padding-block: 2px;
}
#modelsBar .model-pill{
  line-height: 1;                 /* suvienodina vertikalų centravimą */
  font-weight: 600;
  height: 32px;
}
#modelsBar .model-pill img{
  width: 16px; height: 16px;
  padding: 2px;                   /* rėmelis ikonoms */
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--bg-primary);
}

/* bendresnis „įrėminti ikoną“ apdorojimas mažoms ikonoms */
.chip img,
.welcome-btn img,
.tools-bar .tool img,
.community-pings .ping img,
.project-item img,
.avatar img{
  width: 16px; height: 16px;
  padding: 2px;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--bg-primary);
  box-shadow: 0 1px 0 rgba(0,0,0,.03);
}

/* didesnėms kortelių ikonoms – švelnesnis rėmelis */
.lib-card img{
  width: 34px; height: 34px; object-fit: contain;
  padding: 4px;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: var(--bg-secondary);
}

/* kairės pusės chip’ai – mažiau „bold“, mažesnės ikonos */
.chip{ font-weight: 600; }
.chip img{ width: 14px; height: 14px; padding: 2px; }

/* „Bendruomenės“ juostelės – vienodas aukštis ir tarpai */
.community-pings .ping{
  min-height: 32px;
  align-items: center;
  gap: 8px;
  font-size: 12px;
}

/* hero antraštė – gradientas iš juodos į pastel violet-blue */
.hero-title{
  background: linear-gradient(90deg, #0a0a0a 0%, var(--accent) 75%);
  -webkit-background-clip: text; background-clip: text; color: transparent;
}

/* žinučių kortelės – ribotas aukštis + skrolas (vienoda visur) */
.msg-content{
  max-height: 210px;
  overflow: auto;
}
.msg-content::-webkit-scrollbar{ width: 6px }
.msg-content::-webkit-scrollbar-thumb{ background: var(--border); border-radius: 3px }

/* apatinė įvestis – geresnis responsyvus plotis */
#bottomSection[data-responsive]{
  left: 50%;
  transform: translateX(-50%);
  width: clamp(520px, 60vw, 920px);      /* nesusiaurėja per daug */
  max-width: 920px;
}
#messageInput{ font-size: 15px; }
#sendBtn{ background: var(--accent); }

/* įrankių juosta – mažesnės ikonos + lengvesnis tekstas */
.tools-bar{ gap: 6px; }
.tools-bar .tool{
  font-size: 11px;
  font-weight: 600;
  padding: 4px 8px;
}
.tools-bar .tool img{ width: 14px; height: 14px; }

/* Sidebar ID’ai – jei reikės selektorių JS’ui, turim kur „kabintis“ */
#sidebar{ contain: layout paint; }
#communityPings{ contain: content; }
#projectsList .project-item img{ width: 14px; height: 14px; }
#historyList{ min-height: 20px; }

/* Sveikinimo mygtukai – suvienodinti aukštį */
.welcome-btn{
  height: 36px;
  display: inline-flex; align-items: center;
}

/* „nukirptų“ SVG apsauga chate (ikonos išlieka protingo dydžio) */
.chat-area img[src$="video-plus.svg"],
.chat-area img[src$="video-library.svg"],
.chat-area img[src$="photo.svg"]{
  max-width: 40px !important; height: auto !important;
}

/* Profilio dropdown – aiškesni select’ai */
.profile-controls .select{
  min-width: 88px;
}

/* Mobilūs pataisymai */
@media (max-width: 1024px){
  #bottomSection[data-responsive]{
    width: calc(100% - 20px);
    left: 50%;
    transform: translateX(-50%);
  }
  .brand{ margin-left: 16px; }         /* mažiau pastumiam logo */
  .brand-icon{ width: 74px; }
  .library-grid{ grid-template-columns: repeat(2, 1fr); }
}
