<!DOCTYPE html>
<html lang="lt" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sveikatos informacijos asistentas</title>
  
  <style>
/* =========================================================
   UNIVERSALI SPALVÅ² SISTEMA
   ========================================================= */
:root {
  --bg-primary: #0a0d14;
  --bg-secondary: #0f1419;
  --bg-elevated: #141922;
  --bg-card: #1a1f2b;
  --bg-overlay: #1e252f;
  
  --text-primary: #e8eaf0;
  --text-secondary: #b8bcc8;
  --text-muted: #8a8f9a;
  --text-hint: #6b7280;
  
  --border-soft: #1f2937;
  --border-medium: #374151;
  
  --accent-primary: #10b981;
  --accent-primary-hover: #059669;
  --accent-secondary: #06b6d4;
  --accent-ghost: #064e3b;
  
  --success: #10b981;
  --warning: #f59e0b;
  --error: #ef4444;
  --info: #3b82f6;
  
  --neu-raise: 
    0 4px 8px rgba(0, 0, 0, 0.3), 
    0 2px 4px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  
  --neu-press: 
    inset 0 2px 4px rgba(0, 0, 0, 0.4),
    inset 0 1px 2px rgba(0, 0, 0, 0.3);
  
  --neu-float: 
    0 10px 25px rgba(0, 0, 0, 0.5), 
    0 4px 8px rgba(0, 0, 0, 0.3);
  
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-2xl: 24px;
  
  --space-sm: 8px;
  --space-md: 12px;
  --space-lg: 16px;
  --space-xl: 20px;
  --space-2xl: 24px;
  --space-3xl: 32px;
  --space-4xl: 40px;
  
  --transition-fast: 0.15s;
  --transition-normal: 0.25s;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg-primary);
  color: var(--text-primary);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, system-ui, sans-serif;
  line-height: 1.6;
  overflow-x: hidden;
}

.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: var(--space-xl);
}

/* =========================================================
   HERO SECTION
   ========================================================= */
.hero-section {
  text-align: center;
  margin-bottom: var(--space-4xl);
  padding: var(--space-4xl) 0;
  position: relative;
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(6, 182, 212, 0.1));
  border-radius: var(--radius-2xl);
}

.hero-title {
  font-size: clamp(32px, 5vw, 48px);
  font-weight: 800;
  margin-bottom: var(--space-lg);
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  line-height: 1.2;
}

.hero-subtitle {
  font-size: 18px;
  color: var(--text-secondary);
  margin-bottom: var(--space-xl);
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

.hero-disclaimer {
  background: var(--bg-elevated);
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
  border-left: 4px solid var(--accent-primary);
  margin: var(--space-xl) auto;
  max-width: 800px;
}

.disclaimer-text {
  font-size: 14px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.stats-banner {
  display: flex;
  justify-content: center;
  gap: var(--space-3xl);
  margin-bottom: var(--space-4xl);
  flex-wrap: wrap;
}

.stat-item {
  text-align: center;
  background: var(--bg-card);
  padding: var(--space-xl);
  border-radius: var(--radius-xl);
  box-shadow: var(--neu-raise);
  border: 1px solid var(--border-soft);
  min-width: 120px;
}

.stat-number {
  font-size: 28px;
  font-weight: 800;
  color: var(--accent-primary);
  display: block;
  line-height: 1;
}

.stat-label {
  font-size: 11px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-top: var(--space-sm);
}

/* =========================================================
   FEATURES GRID
   ========================================================= */
.features-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-3xl);
  margin-bottom: var(--space-4xl);
}

.feature-card {
  background: var(--bg-card);
  border-radius: var(--radius-2xl);
  padding: 0;
  text-align: center;
  box-shadow: var(--neu-raise);
  border: 1px solid var(--border-soft);
  transition: all var(--transition-normal) ease;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  min-height: 400px;
  display: flex;
  flex-direction: column;
}

.feature-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
  opacity: 0;
  transition: opacity var(--transition-normal);
}

.feature-card:hover::before {
  opacity: 1;
}

.feature-card:hover {
  transform: translateY(-8px);
  box-shadow: var(--neu-float);
}

.feature-header {
  position: relative;
  height: 200px;
  background-size: cover;
  background-position: center;
  display: flex;
  align-items: center;
  justify-content: center;
}

.feature-header::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(to bottom, rgba(0,0,0,.3), rgba(0,0,0,.7));
}

.feature-icon {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  font-weight: 800;
  color: white;
  background: rgba(16, 185, 129, 0.9);
  box-shadow: var(--neu-raise);
  position: relative;
  z-index: 2;
}

.feature-content {
  padding: var(--space-3xl);
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.feature-title {
  font-size: 20px;
  font-weight: 700;
  margin-bottom: var(--space-md);
  color: var(--text-primary);
}

.feature-desc {
  color: var(--text-secondary);
  line-height: 1.6;
  margin-bottom: var(--space-xl);
}

.feature-cta {
  margin-top: var(--space-xl);
}

.btn {
  display: inline-flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-md) var(--space-xl);
  border-radius: var(--radius-lg);
  background: var(--bg-elevated);
  color: var(--text-primary);
  text-decoration: none;
  font-weight: 600;
  box-shadow: var(--neu-raise);
  transition: all var(--transition-normal) ease;
  border: 1px solid var(--border-soft);
  cursor: pointer;
  border: none;
  font-size: 14px;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: var(--neu-float);
}

.btn-primary {
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  color: white;
  border: none;
}

.btn-secondary {
  background: linear-gradient(135deg, var(--accent-secondary), var(--accent-primary));
  color: white;
  border: none;
}

.btn-lg {
  padding: var(--space-lg) var(--space-3xl);
  font-size: 16px;
  border-radius: var(--radius-xl);
}

/* =========================================================
   MODAL/POPUP SYSTEM
   ========================================================= */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(8px);
  z-index: 1000;
  display: none;
  animation: fadeIn 0.3s ease;
}

.modal-overlay.active {
  display: flex;
  align-items: center;
  justify-content: center;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.modal {
  background: var(--bg-primary);
  border-radius: var(--radius-2xl);
  box-shadow: var(--neu-float);
  border: 1px solid var(--border-soft);
  width: 95%;
  max-width: 900px;
  max-height: 90vh;
  overflow: hidden;
  animation: slideUp 0.3s ease;
  display: flex;
  flex-direction: column;
}

@keyframes slideUp {
  from { transform: translateY(50px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.modal-header {
  background: var(--bg-elevated);
  padding: var(--space-xl);
  border-bottom: 1px solid var(--border-soft);
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
}

.modal-title {
  font-size: 24px;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.modal-close {
  background: var(--bg-card);
  border: 1px solid var(--border-soft);
  color: var(--text-muted);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--transition-fast);
  font-size: 18px;
}

.modal-close:hover {
  background: var(--error);
  color: white;
  transform: scale(1.1);
}

.modal-body {
  flex: 1;
  padding: var(--space-xl);
  overflow-y: auto;
}

/* =========================================================
   CHAT SYSTEM
   ========================================================= */
.chat-section {
  background: var(--bg-secondary);
  border-radius: var(--radius-2xl);
  margin-top: var(--space-4xl);
  box-shadow: var(--neu-raise);
  border: 1px solid var(--border-soft);
  overflow: hidden;
}

.chat-header {
  padding: var(--space-xl);
  border-bottom: 1px solid var(--border-soft);
  background: var(--bg-elevated);
  text-align: center;
}

.chat-title {
  font-size: 24px;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-sm);
  margin-bottom: var(--space-sm);
}

.ai-status {
  font-size: 14px;
  color: var(--success);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-sm);
}

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--success);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.chat-messages {
  padding: var(--space-xl);
  max-height: 400px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}

.message {
  display: flex;
  gap: var(--space-md);
  align-items: flex-start;
  animation: messageIn 0.3s ease;
  max-width: 80%;
}

@keyframes messageIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.message.user {
  flex-direction: row-reverse;
  align-self: flex-end;
}

.message-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 12px;
  flex-shrink: 0;
}

.message.ai .message-avatar {
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  color: white;
}

.message.user .message-avatar {
  background: var(--bg-elevated);
  color: var(--text-primary);
  border: 2px solid var(--border-medium);
}

.message-content {
  background: var(--bg-card);
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  box-shadow: var(--neu-raise);
  font-size: 14px;
  line-height: 1.5;
}

.message.user .message-content {
  background: var(--accent-primary);
  color: white;
  border-color: transparent;
}

/* =========================================================
   SAFETY ELEMENTS
   ========================================================= */
.emergency-notice {
  background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(239, 68, 68, 0.05));
  border: 2px solid var(--error);
  border-radius: var(--radius-lg);
  padding: var(--space-xl);
  margin: var(--space-xl) 0;
  text-align: center;
}

.emergency-title {
  color: var(--error);
  font-size: 18px;
  font-weight: 700;
  margin-bottom: var(--space-md);
}

.emergency-text {
  color: var(--text-primary);
  margin-bottom: var(--space-md);
}

.emergency-number {
  font-size: 24px;
  font-weight: 800;
  color: var(--error);
}

.medical-disclaimer {
  background: var(--bg-elevated);
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
  border-left: 4px solid var(--warning);
  margin: var(--space-xl) 0;
}

.info-cards {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-lg);
  margin: var(--space-xl) 0;
}

.info-card {
  background: var(--bg-card);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  text-align: center;
  box-shadow: var(--neu-raise);
  border: 1px solid var(--border-soft);
  cursor: pointer;
  transition: all var(--transition-normal) ease;
}

.info-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--neu-float);
}

.symptom-cards {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--space-lg);
  margin: var(--space-xl) 0;
}

.symptom-card {
  background: var(--bg-card);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  text-align: center;
  box-shadow: var(--neu-raise);
  border: 1px solid var(--border-soft);
  cursor: pointer;
  transition: all var(--transition-normal) ease;
}

.symptom-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--neu-float);
}

.typing-indicator {
  display: flex;
  gap: 4px;
  align-items: center;
  color: var(--text-muted);
}

.typing-dots {
  display: flex;
  gap: 4px;
}

.typing-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--accent-primary);
  animation: typing 1.4s infinite ease-in-out;
}

.typing-dot:nth-child(1) { animation-delay: -0.32s; }
.typing-dot:nth-child(2) { animation-delay: -0.16s; }

@keyframes typing {
  0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
  40% { transform: scale(1); opacity: 1; }
}

.chat-input {
  padding: var(--space-xl);
  border-top: 1px solid var(--border-soft);
  background: var(--bg-elevated);
}

.input-group {
  display: flex;
  gap: var(--space-md);
  align-items: flex-end;
  max-width: 800px;
  margin: 0 auto;
}

.message-input {
  flex: 1;
  background: var(--bg-card);
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  color: var(--text-primary);
  resize: none;
  min-height: 50px;
  max-height: 120px;
  font-family: inherit;
  font-size: 14px;
}

.message-input:focus {
  outline: none;
  border-color: var(--accent-primary);
  box-shadow: 0 0 0 3px var(--accent-ghost);
}

.send-btn {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: var(--accent-primary);
  color: white;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--transition-fast);
  font-size: 18px;
}

.send-btn:hover {
  background: var(--accent-primary-hover);
  transform: scale(1.1);
}

.send-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* =========================================================
   RESPONSIVE
   ========================================================= */
@media (max-width: 1024px) {
  .features-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .info-cards {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .symptom-cards {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 768px) {
  .container {
    padding: var(--space-lg);
  }
  
  .features-grid {
    grid-template-columns: 1fr;
    gap: var(--space-xl);
  }
  
  .feature-card {
    min-height: 350px;
  }
  
  .stats-banner {
    flex-direction: column;
    align-items: center;
    gap: var(--space-lg);
  }
  
  .modal {
    width: 98%;
    margin: var(--space-sm);
  }
  
  .info-cards,
  .symptom-cards {
    grid-template-columns: 1fr;
  }
  
  .chat-messages {
    max-height: 300px;
  }
  
  .message {
    max-width: 90%;
  }
}

.hidden {
  display: none !important;
}

/* Loading animation */
.loading {
  display: inline-block;
  width: 16px;
  height: 16px;
  border: 2px solid var(--border-soft);
  border-radius: 50%;
  border-top-color: var(--accent-primary);
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}
  </style>
</head>
<body>
  <div class="container">
    <!-- Hero Section -->
    <div class="hero-section">
      <h1 class="hero-title">Sveikatos informacijos asistentas</h1>
      <p class="hero-subtitle">
        EdukacinÄ sveikatos informacija ir bendri patarimai. NepakeiÄia gydytojo konsultacijos.
      </p>
      
      <div class="hero-disclaimer">
        <div class="disclaimer-text">
          <strong>Svarbu:</strong> Tai edukacinÄ informacija, ne medicinos diagnozÄ ar gydymas. Visais konkreÄiais sveikatos klausimais kreipkitÄs Ä¯ gydytojÄ.
        </div>
      </div>
      
      <!-- Statistics Banner -->
      <div class="stats-banner">
        <div class="stat-item">
          <span class="stat-number">100%</span>
          <span class="stat-label">Tik edukacinÄ info</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">24/7</span>
          <span class="stat-label">Greitoji: 112</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">Always</span>
          <span class="stat-label">KreipkitÄs Ä¯ gydytojÄ</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">Safe</span>
          <span class="stat-label">Saugi informacija</span>
        </div>
      </div>
    </div>

    <!-- Emergency Notice -->
    <div class="emergency-notice">
      <div class="emergency-title">Greitoji medicinos pagalba</div>
      <div class="emergency-text">Skubiais atvejais, traumÅ³ ar gyvybÄ kelianÄiÅ³ situacijÅ³ atveju:</div>
      <div class="emergency-number">112 - Greitoji pagalba</div>
    </div>

    <!-- Main Features -->
    <div class="features-grid">
      <div class="feature-card" data-feature="common-symptoms">
        <div class="feature-header" style="background-image: url('https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=400&h=300&fit=crop');">
          <div class="feature-icon">ð¡ï¸</div>
        </div>
        <div class="feature-content">
          <h3 class="feature-title">DaÅ¾ni simptomai</h3>
          <p class="feature-desc">
            Bendroji informacija apie daÅ¾nus simptomus ir kada kreiptis Ä¯ gydytojÄ. NepakeiÄia profesionalios diagnostikos.
          </p>
          <div class="feature-cta">
            <button class="btn btn-primary btn-lg">SimptomÅ³ gidas</button>
          </div>
        </div>
      </div>

      <div class="feature-card" data-feature="first-aid">
        <div class="feature-header" style="background-image: url('https://images.unsplash.com/photo-1584432743501-7d5c27a39189?w=400&h=300&fit=crop');">
          <div class="feature-icon">ð©¹</div>
        </div>
        <div class="feature-content">
          <h3 class="feature-title">Pirmoji pagalba</h3>
          <p class="feature-desc">
            Pirmosios pagalbos pagrindai ir greitieji veiksmai. Rekomenduojama mokytis iÅ¡ kvalifikuotÅ³ instruktoriÅ³.
          </p>
          <div class="feature-cta">
            <button class="btn btn-secondary btn-lg">Pagalbos pagrindai</button>
          </div>
        </div>
      </div>

      <div class="feature-card" data-feature="prevention">
        <div class="feature-header" style="background-image: url('https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=300&fit=crop');">
          <div class="feature-icon">ð¡ï¸</div>
        </div>
        <div class="feature-content">
          <h3 class="feature-title">Prevencija ir profilaktika</h3>
          <p class="feature-desc">
            LigÅ³ prevencijos principai, vakcinacijos, sveikos gyvensenos patarimai ir reguliarÅ«s patikrinimai.
          </p>
          <div class="feature-cta">
            <button class="btn btn-lg">Prevencijos gidas</button>
          </div>
        </div>
      </div>

      <div class="feature-card" data-feature="wellness">
        <div class="feature-header" style="background-image: url('https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop');">
          <div class="feature-icon">ð±</div>
        </div>
        <div class="feature-content">
          <h3 class="feature-title">Sveikas gyvenimo bÅ«das</h3>
          <p class="feature-desc">
            Mityba, fizinis aktyvumas, miegas ir wellness. Individualius planus derinkite su specialistais.
          </p>
          <div class="feature-cta">
            <button class="btn btn-lg">Wellness patarimai</button>
          </div>
        </div>
      </div>

      <div class="feature-card" data-feature="when-to-see-doctor">
        <div class="feature-header" style="background-image: url('https://images.unsplash.com/photo-1563213126-a4273aed2016?w=400&h=300&fit=crop');">
          <div class="feature-icon">ð¥</div>
        </div>
        <div class="feature-content">
          <h3 class="feature-title">Kada kreiptis Ä¯ gydytojÄ</h3>
          <p class="feature-desc">
            AiÅ¡kÅ«s kriterijai, kada reikalinga medicinos pagalba, skubÅ«s atvejai ir profilaktinÄs apÅ¾iÅ«ros.
          </p>
          <div class="feature-cta">
            <button class="btn btn-lg">Gydytojo pagalba</button>
          </div>
        </div>
      </div>

      <div class="feature-card" data-feature="health-resources">
        <div class="feature-header" style="background-image: url('https://images.unsplash.com/photo-1581056771107-24ca5f033842?w=400&h=300&fit=crop');">
          <div class="feature-icon">ð</div>
        </div>
        <div class="feature-content">
          <h3 class="feature-title">Sveikatos iÅ¡tekliai</h3>
          <p class="feature-desc">
            Patikimi sveikatos informacijos Å¡altiniai, kontaktai ir nuorodos Ä¯ sveikatos specialistus.
          </p>
          <div class="feature-cta">
            <button class="btn btn-lg">IÅ¡tekliÅ³ sÄraÅ¡as</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Chat Section -->
    <div class="chat-section">
      <div class="chat-header">
        <div class="chat-title">ð©º Sveikatos informacijos asistentas</div>
        <div class="ai-status">
          <span class="status-dot"></span>
          Teikia bendrÄ edukacinÄ informacijÄ apie sveikatÄ
        </div>
      </div>
      <div class="chat-messages" id="chatMessages">
        <div class="message ai">
          <div class="message-avatar">ð©º</div>
          <div class="message-content">
            Sveiki! Galiu pateikti bendrÄ edukacinÄ informacijÄ apie sveikatÄ, simptomus ir kada kreiptis Ä¯ gydytojÄ.
            <div class="medical-disclaimer" style="margin-top: 12px;">
              <strong>Svarbu:</strong> Neteikiu diagnoziÅ³ ar gydymo rekomendacijÅ³. Visais konkreÄiais sveikatos klausimais kreipkitÄs Ä¯ gydytojÄ.
            </div>
          </div>
        </div>
      </div>
      <div class="chat-input">
        <div class="input-group">
          <textarea 
            class="message-input" 
            id="messageInput" 
            placeholder="UÅ¾duokite klausimÄ apie bendrÄ sveikatos informacijÄ..."
            rows="1"
          ></textarea>
          <button class="send-btn" id="sendBtn">â</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Overlay -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal" id="modal">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">Feature Title</h2>
        <button class="modal-close" id="modalClose">Ã</button>
      </div>
      <div class="modal-body" id="modalContent">
        <!-- Content will be loaded here -->
      </div>
    </div>
  </div>

  <script>
    // Global state
    let currentFeature = null;
    let chatHistory = [];
    let messageCount = 0;

    // DOM elements
    const modalOverlay = document.getElementById('modalOverlay');
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');
    const modalClose = document.getElementById('modalClose');
    const chatMessages = document.getElementById('chatMessages');
    const messageInput = document.getElementById('messageInput');
    const sendBtn = document.getElementById('sendBtn');

    // Feature content with balanced safety
    const featureContent = {
      'common-symptoms': {
        title: 'ð¡ï¸ DaÅ¾ni simptomai',
        content: `
          <div class="medical-disclaimer">
            <strong>PerspÄjimas:</strong> Å i informacija neskirta savidiagnostikai. Visais simptomÅ³ atvejais kreipkitÄs Ä¯ gydytojÄ.
          </div>
          
          <div class="symptom-cards">
            <div class="symptom-card" data-symptom="fever">
              <div style="font-size: 32px; margin-bottom: 8px;">ð¡ï¸</div>
              <h5>KarÅ¡Äiavimas</h5>
              <p style="color: var(--text-secondary); font-size: 10px;">AukÅ¡ta temperatÅ«ra</p>
            </div>
            <div class="symptom-card" data-symptom="headache">
              <div style="font-size: 32px; margin-bottom: 8px;">ð¤</div>
              <h5>Galvos skausmas</h5>
              <p style="color: var(--text-secondary); font-size: 10px;">Skausmas galvoje</p>
            </div>
            <div class="symptom-card" data-symptom="cough">
              <div style="font-size: 32px; margin-bottom: 8px;">ð·</div>
              <h5>Kosulys</h5>
              <p style="color: var(--text-secondary); font-size: 10px;">KvÄpavimo takÅ³ iritacija</p>
            </div>
            <div class="symptom-card" data-symptom="stomach">
              <div style="font-size: 32px; margin-bottom: 8px;">ð¤¢</div>
              <h5>Pilvo skausmas</h5>
              <p style="color: var(--text-secondary); font-size: 10px;">VirÅ¡kinimo problemos</p>
            </div>
            <div class="symptom-card" data-symptom="dental">
              <div style="font-size: 32px; margin-bottom: 8px;">ð¦·</div>
              <h5>DantÅ³ skausmas</h5>
              <p style="color: var(--text-secondary); font-size: 10px;">OdontologinÄs problemos</p>
            </div>
            <div class="symptom-card" data-symptom="fatigue">
              <div style="font-size: 32px; margin-bottom: 8px;">ð´</div>
              <h5>Nuovargis</h5>
              <p style="color: var(--text-secondary); font-size: 10px;">Energijos stoka</p>
            </div>
            <div class="symptom-card" data-symptom="joint">
              <div style="font-size: 32px; margin-bottom: 8px;">ð¦´</div>
              <h5>SÄnariÅ³ skausmas</h5>
              <p style="color: var(--text-secondary); font-size: 10px;">Artritai, traumos</p>
            </div>
            <div class="symptom-card" data-symptom="skin">
              <div style="font-size: 32px; margin-bottom: 8px;">ð§´</div>
              <h5>Odos problemos</h5>
              <p style="color: var(--text-secondary); font-size: 10px;">IÅ¡bÄrimai, nieÅ¾Äjimas</p>
            </div>
          </div>
          
          <div style="margin: 24px 0;">
            <h4>â ï¸ Kada skubiai kreiptis Ä¯ gydytojÄ:</h4>
            <div style="background: var(--bg-elevated); padding: 20px; border-radius: 16px; margin: 16px 0;">
              <p style="color: var(--text-secondary);">
                â¢ AukÅ¡ta temperatÅ«ra (>39Â°C) ilgiau nei 3 dienos<br>
                â¢ Stiprus, staigus skausmas<br>
                â¢ KvÄpavimo sunkumai<br>
                â¢ Stiprus kraujavimas<br>
                â¢ SÄmonÄs sutrikimas<br>
                â¢ Allergijos poÅ¾ymiai
              </p>
            </div>
          </div>

          <div class="emergency-notice">
            <div class="emergency-title">Svarbu atsiminti</div>
            <div class="emergency-text">
              Simptomai gali turÄti daug prieÅ¾asÄiÅ³. Tik gydytojas gali nustatyti tiksliÄ diagnozÄ.
            </div>
          </div>
        `
      },
      
      'first-aid': {
        title: 'ð©¹ Pirmoji pagalba',
        content: `
          <div class="medical-disclaimer">
            <strong>Svarbu:</strong> Å i informacija nepakeiÄia kvalifikuoto pirmosios pagalbos mokymo. MokykitÄs iÅ¡ licencijuotÅ³ instruktoriÅ³.
          </div>

          <div style="margin: 24px 0;">
            <h4>ð¨ SkubÅ«s numeriai:</h4>
            <div style="background: var(--error); color: white; padding: 20px; border-radius: 16px; margin: 16px 0;">
              <p style="font-size: 18px; font-weight: bold;">
                112 - Greitoji pagalba, ugniagesiai, policija<br>
                116 117 - KonsultacinÄ gydytojÅ³ linija
              </p>
            </div>
          </div>
          
          <div style="margin: 24px 0;">
            <h4>ð©º Pagrindiniai principai:</h4>
            <div style="background: var(--bg-elevated); padding: 20px; border-radius: 16px; margin: 16px 0;">
              <p style="color: var(--text-secondary);">
                â¢ UÅ¾tikrinkite saugumÄ (sau ir nukentÄjusiam)<br>
                â¢ Ä®vertinkite situacijÄ<br>
                â¢ IÅ¡kvieskite pagalbÄ (112)<br>
                â¢ Suteikite pagalbÄ pagal Å¾inias<br>
                â¢ StebiÄkite nukentÄjusio bÅ«klÄ<br>
                â¢ Niekada neperkelkite sunkiai suÅ¾eisto Å¾mogaus
              </p>
            </div>
          </div>

          <div class="emergency-notice">
            <div class="emergency-title">Saugumas pirmiausia</div>
            <div class="emergency-text">
              Niekada neatlikite procedÅ«rÅ³, kuriÅ³ nesate iÅ¡mokÄ. Pirmiau iÅ¡kvieskite 112.
            </div>
          </div>
        `
      },
      
      'prevention': {
        title: 'ð¡ï¸ Prevencija ir profilaktika',
        content: `
          <div style="margin: 24px 0;">
            <h4>ð Vakcinacijos:</h4>
            <div style="background: var(--bg-elevated); padding: 20px; border-radius: 16px; margin: 16px 0;">
              <p style="color: var(--text-secondary);">
                â¢ LaikykitÄs nacionalinÄs vakcinacijos programos<br>
                â¢ MetinÄ gripo vakcina (ypaÄ rizikos grupÄms)<br>
                â¢ KelioniÅ³ vakcinacijos (konsultuokitÄs su gydytoju)<br>
                â¢ COVID-19 vakcinacijos pagal rekomendacijas<br>
                â¢ SuaugusiÅ³jÅ³ rappeliai (stabligÄ, difterija)
              </p>
            </div>
          </div>
          
          <div style="margin: 24px 0;">
            <h4>ð ProfilaktinÄs apÅ¾iÅ«ros:</h4>
            <div style="background: var(--bg-elevated); padding: 20px; border-radius: 16px; margin: 16px 0;">
              <p style="color: var(--text-secondary);">
                â¢ Å eimos gydytojas - bent kartÄ per metus<br>
                â¢ Kraujo spaudimo matavimas<br>
                â¢ Cholesterolio patikra (po 40 metÅ³)<br>
                â¢ Onkologiniai patikrinimai pagal amÅ¾iÅ³<br>
                â¢ AkiÅ³ ir ausÅ³ patikra<br>
                â¢ DantÅ³ higienos procedÅ«ros (2 kartus per metus)
              </p>
            </div>
          </div>

          <div class="medical-disclaimer">
            <strong>Pastaba:</strong> Prevencijos planas turi bÅ«ti individualus ir derinamas su gydytoju.
          </div>
        `
      },
      
      'wellness': {
        title: 'ð± Sveikas gyvenimo bÅ«das',
        content: `
          <div class="info-cards">
            <div class="info-card" data-topic="nutrition">
              <div style="font-size: 48px; margin-bottom: 12px;">ð¥</div>
              <h4>Subalansuota mityba</h4>
              <p style="color: var(--text-secondary); font-size: 12px;">Mitybos principai</p>
            </div>
            <div class="info-card" data-topic="exercise">
              <div style="font-size: 48px; margin-bottom: 12px;">ð</div>
              <h4>Fizinis aktyvumas</h4>
              <p style="color: var(--text-secondary); font-size: 12px;">Sport ir judÄjimas</p>
            </div>
            <div class="info-card" data-topic="sleep">
              <div style="font-size: 48px; margin-bottom: 12px;">ð´</div>
              <h4>KokybiÅ¡kas miegas</h4>
              <p style="color: var(--text-secondary); font-size: 12px;">Poilsio higiena</p>
            </div>
            <div class="info-card" data-topic="stress">
              <div style="font-size: 48px; margin-bottom: 12px;">ð§</div>
              <h4>Streso valdymas</h4>
              <p style="color: var(--text-secondary); font-size: 12px;">Atsipalaidavimas</p>
            </div>
            <div class="info-card" data-topic="hygiene">
              <div style="font-size: 48px; margin-bottom: 12px;">ð§¼</div>
              <h4>Asmens higiena</h4>
              <p style="color: var(--text-secondary); font-size: 12px;">InfekcijÅ³ prevencija</p>
            </div>
            <div class="info-card" data-topic="habits">
              <div style="font-size: 48px; margin-bottom: 12px;">ð­</div>
              <h4>Å½alingi Ä¯proÄiai</h4>
              <p style="color: var(--text-secondary); font-size: 12px;">RÅ«kymas, alkoholis</p>
            </div>
          </div>

          <div class="medical-disclaimer">
            <strong>Svarbu:</strong> PrieÅ¡ keiÄiant gyvenimo bÅ«dÄ, ypaÄ turint sveikatos problemÅ³, konsultuokitÄs su gydytoju.
          </div>
        `
      },
      
      'when-to-see-doctor': {
        title: 'ð¥ Kada kreiptis Ä¯ gydytojÄ',
        content: `
          <div style="margin: 24px 0;">
            <h4>ð¨ SkubÅ«s atvejai (112):</h4>
            <div style="background: var(--error); color: white; padding: 20px; border-radius: 16px; margin: 16px 0;">
              <p>
                â¢ Å irdies priepuolis poÅ¾ymiai<br>
                â¢ Insulto simptomai<br>
                â¢ Stiprus kraujavimas<br>
                â¢ KvÄpavimo sunkumai<br>
                â¢ SÄmonÄs netekimas<br>
                â¢ SunkÅ«s traumos atvejai
              </p>
            </div>
          </div>
          
          <div style="margin: 24px 0;">
            <h4>â ï¸ Skubiai Ä¯ Å¡eimos gydytojÄ:</h4>
            <div style="background: var(--bg-elevated); padding: 20px; border-radius: 16px; margin: 16px 0;">
              <p style="color: var(--text-secondary);">
                â¢ AukÅ¡ta temperatÅ«ra ilgiau nei 3 dienos<br>
                â¢ Stiprus skausmas, kuris nestoja<br>
                â¢ Kraujavimas iÅ¡ natÅ«raliÅ³ angÅ³<br>
                â¢ Staiga atsiradÄ matymo ar klausos sutrikimai<br>
                â¢ Stiprus galvos skausmas su vÄmimu<br>
                â¢ Ä®tartini odos pakitimai
              </p>
            </div>
          </div>
          
          <div style="margin: 24px 0;">
            <h4>ð Planuoti vizitai:</h4>
            <div style="background: var(--bg-elevated); padding: 20px; border-radius: 16px; margin: 16px 0;">
              <p style="color: var(--text-secondary);">
                â¢ MetinÄs profilaktinÄs apÅ¾iÅ«ros<br>
                â¢ LÄtinÄs ligos kontrolÄ<br>
                â¢ Vakcinacijos<br>
                â¢ Sveikatos patikra prieÅ¡ keliones<br>
                â¢ Onkologiniai patikrinimai pagal amÅ¾iÅ³
              </p>
            </div>
          </div>
        `
      },
      
      'health-resources': {
        title: 'ð Sveikatos iÅ¡tekliai',
        content: `
          <div style="margin: 24px 0;">
            <h4>ð¥ Kur kreiptis:</h4>
            <div style="background: var(--bg-elevated); padding: 20px; border-radius: 16px; margin: 16px 0;">
              <p style="color: var(--text-secondary);">
                â¢ <strong>Å eimos gydytojas</strong> - pirminis kontaktas visais sveikatos klausimais<br>
                â¢ <strong>Greitoji pagalba 112</strong> - kritinÄs situacijos<br>
                â¢ <strong>KonsultacinÄ linija 116 117</strong> - medicinos konsultacijos<br>
                â¢ <strong>Poliklinikos</strong> - specializuota pagalba<br>
                â¢ <strong>VaistinÄs</strong> - farmacijos konsultacijos<br>
                â¢ <strong>Odontologai</strong> - dantÅ³ sveikatos prieÅ¾iÅ«ra
              </p>
            </div>
          </div>

          <div style="margin: 24px 0;">
            <h4>ð Patikimi informacijos Å¡altiniai:</h4>
            <div style="background: var(--bg-elevated); padding: 20px; border-radius: 16px; margin: 16px 0;">
              <p style="color: var(--text-secondary);">
                â¢ Sveikatos apsaugos ministerija (sam.lrv.lt)<br>
                â¢ Nacionalinis visuomenÄs sveikatos centras<br>
                â¢ ValstybinÄ vaistÅ³ kontrolÄs tarnyba<br>
                â¢ Lietuvos gydytojÅ³ rÅ«mai<br>
                â¢ Pasaulio sveikatos organizacija (WHO)
              </p>
            </div>
          </div>

          <div class="medical-disclaimer">
            <strong>Pastaba:</strong> Visada patikrinkite specialistÅ³ kvalifikacijas ir licencijas.
          </div>
        `
      }
    };

    // Emergency keywords detection
    function detectEmergencyContent(message) {
      const emergencyKeywords = [
        'Å¡irdies priepuolis', 'insultas', 'negaliu kvÄpuoti', 'kraujavimas',
        'sunkus skausmas', 'apalp', 'sÄmonÄs netekimas', 'convulsijos',
        'apsinuodijimas', 'trauma', 'accident', 'nelaimÄ'
      ];
      
      const msgLower = message.toLowerCase();
      return emergencyKeywords.some(keyword => msgLower.includes(keyword));
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      initializeEventListeners();
      console.log('ð©º Sveikatos informacijos asistentas paleistas!');
    });

    function initializeEventListeners() {
      // Feature card clicks
      document.querySelectorAll('.feature-card').forEach(card => {
        card.addEventListener('click', function() {
          const feature = this.dataset.feature;
          openModal(feature);
        });
      });

      // Modal events
      modalClose.addEventListener('click', closeModal);
      modalOverlay.addEventListener('click', function(e) {
        if (e.target === modalOverlay) closeModal();
      });

      // Chat functionality
      sendBtn.addEventListener('click', sendMessage);
      messageInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      });

      // Auto-resize textarea
      messageInput.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = Math.min(this.scrollHeight, 120) + 'px';
      });
    }

    function openModal(feature) {
      currentFeature = feature;
      const content = featureContent[feature];
      
      if (content) {
        modalTitle.innerHTML = content.title;
        modalContent.innerHTML = content.content;
        modalOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
        
        bindContentEvents();
      }
    }

    function closeModal() {
      modalOverlay.classList.remove('active');
      document.body.style.overflow = '';
      setTimeout(() => {
        modalContent.innerHTML = '';
        modalTitle.innerHTML = '';
        currentFeature = null;
      }, 300);
    }

    function bindContentEvents() {
      // Info cards
      document.querySelectorAll('.info-card').forEach(card => {
        card.addEventListener('click', function() {
          const topic = this.dataset.topic;
          const topicNames = {
            nutrition: 'mitybos principus',
            exercise: 'fizinio aktyvumo rekomendacijas',
            sleep: 'miego higienos patarimus',
            stress: 'streso valdymo metodus',
            hygiene: 'higienos rekomendacijas',
            habits: 'informacijÄ apie Å¾alingus Ä¯proÄius'
          };
          sendChatMessage(`Papasakokite apie ${topicNames[topic]}`);
          closeModal();
        });
      });

      // Symptom cards
      document.querySelectorAll('.symptom-card').forEach(card => {
        card.addEventListener('click', function() {
          const symptom = this.dataset.symptom;
          const symptomNames = {
            fever: 'karÅ¡ÄiavimÄ',
            headache: 'galvos skausmÄ',
            cough: 'kosulÄ¯',
            stomach: 'pilvo skausmÄ',
            dental: 'dantÅ³ skausmÄ',
            fatigue: 'nuovargÄ¯',
            joint: 'sÄnariÅ³ skausmÄ',
            skin: 'odos problemas'
          };
          sendChatMessage(`Kada dÄl ${symptomNames[symptom]} reikia kreiptis Ä¯ gydytojÄ?`);
          closeModal();
        });
      });
    }

    function sendMessage() {
      const message = messageInput.value.trim();
      if (!message) return;
      
      // Emergency detection
      if (detectEmergencyContent(message)) {
        addEmergencyResponse();
        return;
      }
      
      sendChatMessage(message);
      messageInput.value = '';
      messageInput.style.height = 'auto';
    }

    function addEmergencyResponse() {
      const emergencyDiv = document.createElement('div');
      emergencyDiv.className = 'message ai';
      emergencyDiv.innerHTML = `
        <div class="message-avatar">ð¨</div>
        <div class="message-content">
          <div class="emergency-notice" style="margin: 0;">
            <div class="emergency-title">ð¨ SKUBI MEDICINOS PAGALBA</div>
            <div class="emergency-text">DÄl skubiÅ³ medicinos situacijÅ³ NEDELSIANT:</div>
            <div style="margin: 12px 0;">
              <strong>112 - Greitoji pagalba</strong><br>
              <strong>116 117 - KonsultacinÄ gydytojÅ³ linija</strong>
            </div>
            <div style="font-size: 14px;">
              Nesikimkite Ä¯ internetinÄ informacijÄ kritinÄse situacijose!
            </div>
          </div>
        </div>
      `;
      
      chatMessages.appendChild(emergencyDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      messageInput.value = '';
    }

    function sendChatMessage(message) {
      // Add user message
      addChatMessage(message, true);
      chatHistory.push({ role: 'user', content: message });
      messageCount++;
      
      // Show typing indicator
      const typingIndicator = addTypingIndicator();
      
      // Simulate AI processing
      setTimeout(() => {
        removeTypingIndicator(typingIndicator);
        
        // Generate AI response
        const response = generateHealthResponse(message);
        addChatMessage(response, false);
        chatHistory.push({ role: 'assistant', content: response });
        
      }, 1000 + Math.random() * 1500);
    }

    function addChatMessage(content, isUser = false) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${isUser ? 'user' : 'ai'}`;
      
      const disclaimerHtml = !isUser ? `
        <div class="medical-disclaimer" style="margin-top: 12px;">
          <strong>Priminimas:</strong> Tai bendroji informacija. Visais konkreÄiais atvejais kreipkitÄs Ä¯ gydytojÄ.
        </div>
      ` : '';
      
      messageDiv.innerHTML = `
        <div class="message-avatar">${isUser ? 'ð¤' : 'ð©º'}</div>
        <div class="message-content">${content}${disclaimerHtml}</div>
      `;
      
      chatMessages.appendChild(messageDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function addTypingIndicator() {
      const typingDiv = document.createElement('div');
      typingDiv.className = 'message ai typing-indicator-msg';
      typingDiv.innerHTML = `
        <div class="message-avatar">ð©º</div>
        <div class="message-content">
          <div class="typing-indicator">
            <span>IeÅ¡kau sveikatos informacijos</span>
            <div class="typing-dots">
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
            </div>
          </div>
        </div>
      `;
      
      chatMessages.appendChild(typingDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      return typingDiv;
    }

    function removeTypingIndicator(indicator) {
      if (indicator && indicator.parentNode) {
        indicator.remove();
      }
    }

    function generateHealthResponse(message) {
      const msg = message.toLowerCase();
      
      // Fever/temperature responses
      if (msg.includes('karÅ¡Äiavi') || msg.includes('temperatÅ«r') || msg.includes('kar')) {
        return `<strong>KarÅ¡Äiavimas - bendroji informacija:</strong><br><br>Normali kÅ«no temperatÅ«ra: 36.1-37.2Â°C<br><br><strong>Kada kreiptis Ä¯ gydytojÄ:</strong><br>â¢ TemperatÅ«ra >38.5Â°C ir nedingstanti 3 dienas<br>â¢ TemperatÅ«ra >39.5Â°C<br>â¢ Su karÅ¡Äiavimu atsiranda kvÄpavimo sunkumai<br>â¢ Stiprus galvos skausmas, sprando sustingimas<br>â¢ VÄmimas, dehidratacija<br><br><strong>Pirmoji pagalba:</strong><br>â¢ Daug gÄrimo<br>â¢ Poilsys<br>â¢ Lengvi drabuÅ¾iai<br>â¢ Antipiretikai (paracetamolis) pagal instrukcijÄ`;
      }
      
      // Headache responses
      if (msg.includes('galvos skausm') || msg.includes('galva skaud') || msg.includes('migren')) {
        return `<strong>Galvos skausmas - bendroji informacija:</strong><br><br><strong>DaÅ¾nos prieÅ¾astys:</strong><br>â¢ Ä®tampos tipo galvos skausmas<br>â¢ Migrena<br>â¢ Dehidratacija<br>â¢ Streso poveikis<br>â¢ Miego trÅ«kumas<br><br><strong>Kada skubiai kreiptis Ä¯ gydytojÄ:</strong><br>â¢ Staigus, labai stiprus skausmas<br>â¢ Su vÄmimu ir matymo sutrikimu<br>â¢ Su karÅ¡Äiavimu ir sprando sustingimu<br>â¢ Po galvos traumos<br>â¢ KeiÄiasi skausmo pobÅ«dis<br><br><strong>Pirmoji pagalba:</strong><br>â¢ Poilsys tamsoje<br>â¢ Å altas komprestas<br>â¢ Hidrotalansaspas<br>â¢ SkausmÄ malÅ¡inantys vaistai pagal instrukcijÄ`;
      }
      
      // Cough responses
      if (msg.includes('kosuly') || msg.includes('kosu') || msg.includes('kosÄj')) {
        return `<strong>Kosulys - bendroji informacija:</strong><br><br><strong>Kosul tipos:</strong><br>â¢ Sausas (be skrepliavimo)<br>â¢ DrÄgnas (su skrepliavimo)<br>â¢ LÄtinis (>8 savaitÄs)<br><br><strong>Kada kreiptis Ä¯ gydytojÄ:</strong><br>â¢ Kosulys su krauju<br>â¢ Su aukÅ¡ta temperatÅ«ra >3 dienos<br>â¢ KvÄpavimo sunkumai<br>â¢ KrÅ«tinÄs skausmas<br>â¢ Kosulys >2 savaitÄs be gerÄjimo<br><br><strong>Pagalba namuose:</strong><br>â¢ Daug Å¡ilto gÄrimo<br>â¢ Oro drÄkinimas<br>â¢ Medus ir citrina<br>â¢ Vengti dirginanÄiÅ³ veiksniÅ³<br>â¢ Poilsys`;
      }
      
      // Stomach pain responses
      if (msg.includes('pilvo skausm') || msg.includes('pilvas skaud') || msg.includes('virÅ¡kin')) {
        return `<strong>Pilvo skausmas - bendroji informacija:</strong><br><br><strong>DaÅ¾nos prieÅ¾astys:</strong><br>â¢ VirÅ¡kinimo sutrikimai<br>â¢ Maisto netoleravimas<br>â¢ Stresas<br>â¢ Infekcijos<br>â¢ Gastroenteritis<br><br><strong>Kada skubiai kreiptis Ä¯ gydytojÄ:</strong><br>â¢ Stiprus, staigus skausmas<br>â¢ Su aukÅ¡ta temperatÅ«ra<br>â¢ VÄmimas su krauju<br>â¢ Nenustojamas vÄmimas<br>â¢ Pilvo sustingimas<br>â¢ Åªminio apendicito simptomi<br><br><strong>Lengvavimas namuose:</strong><br>â¢ Lengva dieta<br>â¢ Daug skysÄiÅ³<br>â¢ Å iltas kompresasis<br>â¢ Vengti riebaus maisto`;
      }
      
      // Dental pain responses
      if (msg.includes('dantÅ³ skausm') || msg.includes('dantis skaud') || msg.includes('odontolog')) {
        return `<strong>DantÅ³ skausmas - bendroji informacija:</strong><br><br><strong>DaÅ¾nos prieÅ¾astys:</strong><br>â¢ Äduonis (kariesas)<br>â¢ DantÅ³ Ämiamas<br>â¢ DantenÅ³ uÅ¾degimas<br>â¢ DantÅ³ jautrumas<br>â¢ Sinusitas<br><br><strong>Kada kreiptis Ä¯ odontologÄ:</strong><br>â¢ Stiprus, nuolatinis skausmas<br>â¢ Dantenos paburkusios<br>â¢ KarÅ¡Äiavimas su dantÅ³ skausmu<br>â¢ Veido patinimas<br>â¢ Kraujuoja dantenos<br><br><strong>SkubÅ«s veiksmai:</strong><br>â¢ SkausmÄ malÅ¡inantys vaistai<br>â¢ Å altas kompresasis<br>â¢ Burnos skalavimas druskos tirpalu<br>â¢ Vengti karÅ¡to/Å¡alto maisto<br>â¢ Skubiai registruotis pas odontologÄ`;
      }
      
      // Default health responses
      const healthResponses = [
        `Galiu pateikti bendrÄ informacijÄ apie sveikatos temÄ. Visais konkreÄiais simptomÅ³ atvejais rekomenduoju kreiptis Ä¯ Å¡eimos gydytojÄ arba skambinti konsultacinÄje linijoje 116 117.`,
        
        `Sveikatos klausimais geriausia visada konsultuotis su medicinos specialistais. Galiu papasakoti bendrÄ informacijÄ apie prevencijÄ, sveikÄ gyvenimo bÅ«dÄ ar kada kreiptis Ä¯ gydytojÄ.`,
        
        `DÄl konkreÄiÅ³ simptomÅ³ ar sveikatos problemÅ³ visada kreipkitÄs Ä¯ gydytojÄ. Galiu pateikti edukacinÄ informacijÄ apie sveikatos temÅ³ ar prevencijos principus.`
      ];
      
      return healthResponses[Math.floor(Math.random() * healthResponses.length)];
    }
  </script>
  <script>
(function(){
  const MODEL_PREFS = [
    (window.AI_MODEL || 'gpt-5-mini'),
    'gpt-4o-mini',
    'gpt-4o'
  ];

  async function askStreamFirst(message){
    // 1) bandome stream su pirmu modeliu
    try {
      const model = MODEL_PREFS[0];
      const url = `/api/stream?model=${encodeURIComponent(model)}&message=${encodeURIComponent(message)}&chat_id=${Date.now()}&max_tokens=1024`;
      const res = await fetch(url, { headers: { Accept: 'text/event-stream' }});
      if (!res.ok || !res.body) throw new Error('no stream');
      const reader = res.body.getReader();
      const dec = new TextDecoder();
      let buf = '', full = '';
      window.aiOnToken = (t)=>{}; // gali perraÅ¡yti, jei nori âtypewriterâ
      for(;;){
        const it = await reader.read(); if (it.done) break;
        buf += dec.decode(it.value, {stream:true});
        let i;
        while((i = buf.indexOf('\n\n')) >= 0){
          const chunk = buf.slice(0,i).trim(); buf = buf.slice(i+2);
          if(!chunk) continue;
          const dataLine = chunk.split('\n').find(l=>l.startsWith('data:'));
          if (!dataLine) continue;
          const payload = dataLine.replace(/^data:\s*/,'').trim();
          if (payload === '[DONE]') break;
          try {
            const j = JSON.parse(payload);
            const piece = j?.choices?.[0]?.delta?.content || '';
            if (piece){ full += piece; window.aiOnToken(piece); }
          } catch(_){}
        }
      }
      if (full.trim()) return full;
      throw new Error('empty');
    } catch(e) {
      // 2) fallback Ä¯ /api/complete su keliÅ³ modeliÅ³ sÄraÅ¡u
      const modelsCsv = MODEL_PREFS.join(',');
      const r = await fetch('/api/complete', {
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ message, models: modelsCsv, max_tokens: 1024 })
      });
      const j = await r.json().catch(()=>({}));
      // paimam pirmÄ sÄkmingÄ
      const ok = (j.answers||[]).find(a => a && a.text && !a.error);
      return ok?.text || j.text || 'Nepavyko gauti atsakymo.';
    }
  }

  async function genFlux(prompt){
    const r = await fetch('/api/flux/create', {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ prompt, width:1024, height:1024 })
    });
    const j = await r.json().catch(()=>({}));
    if (j?.image) return j.image;
    throw new Error(j?.error || 'FLUX klaida');
  }

  // âââ UI hookâai: bandome prisikabinti prie tavo esamÅ³ ID; jei jÅ³ nÄra â duodam mini dialogÄ
  const input   = document.querySelector('#messageInput, [data-ai-input]');
  const sendBtn = document.querySelector('#sendBtn, [data-ai-send]');
  const box     = document.querySelector('#chatMessages, [data-ai-messages]');

  function addMsg(html, who='ai'){
    const wrap = document.createElement('div');
    wrap.className = `message ${who==='user'?'user':'ai'}`;
    wrap.innerHTML = `
      <div class="message-avatar">${who==='user' ? (window.userData?.name?.[0]?.toUpperCase() || 'U') : 'AI'}</div>
      <div class="message-content">${html}</div>`;
    (box || document.body).appendChild(wrap);
    if (box) box.scrollTop = box.scrollHeight;
  }

  async function handleSend(){
    const msg = (input?.value || '').trim();
    if (!msg) return;
    addMsg(msg, 'user');
    if (input){ input.value=''; input.style.height='auto'; }

    // paveikslo uÅ¾klausa?
    if (/foto|nuotrauk|image|paveiksl|flux/i.test(msg)) {
      try {
        const url = await genFlux(msg.replace(/^(foto|image|paveikslas)[: ]*/i,''));
        addMsg(`<img src="${url}" alt="AI image" style="max-width:100%;border-radius:12px">`, 'ai');
        return;
      } catch(e){ addMsg('â ï¸ ' + (e?.message||e), 'ai'); return; }
    }

    // teksto atsakymas
    try {
      let buf=''; window.aiOnToken = (t)=>{ buf += t; };
      const full = await askStreamFirst(msg);
      addMsg(full || buf || '(tuÅ¡Äia)', 'ai');
    } catch(e){
      addMsg('â ï¸ ' + (e?.message||e), 'ai');
    }
  }

  if (sendBtn && input){
    sendBtn.addEventListener('click', handleSend);
    input.addEventListener('keydown', (e)=>{ if (e.key==='Enter' && !e.shiftKey){ e.preventDefault(); handleSend(); }});
  } else {
    // Minimalus plaukiojantis mygtukas, jei puslapyje nÄra tavo Chat UI
    const btn = document.createElement('button');
    btn.textContent = 'ð¬';
    btn.style.cssText = 'position:fixed;right:16px;bottom:16px;width:50px;height:50px;border:none;border-radius:50%;background:#4b7;box-shadow:0 8px 28px rgba(0,0,0,.35);color:#fff;font-size:20px;z-index:9999;cursor:pointer';
    document.body.appendChild(btn);
    btn.addEventListener('click', async ()=>{
      const q = prompt('Klausimas AI:'); if (!q) return;
      addMsg(q, 'user'); const a = await askStreamFirst(q); addMsg(a, 'ai');
    });
  }
})();
</script>

</body>
</html>
