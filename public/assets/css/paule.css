/* =========================================================
   Paule – Premium Chat UI
   Šviesi / tamsi tema, mažesnės ikonėlės, soft 3D (neumorph),
   borderless layout, responsive bottom input (nesikerta su sidebar)
   ========================================================= */

/* ---------- Reset ---------- */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;min-height:100vh}
img,svg{max-width:100%;height:auto;display:block}
:focus-visible{outline:none}

/* ---------- Paletė (šviesi) ---------- */
:root{
  --bg-primary:#ffffff;
  --bg-secondary:#f7f7f9;
  --bg-elev:#f2f3f7;

  --text-primary:#13151a;
  --text-secondary:#535666;
  --text-muted:#9aa0a8;

  --border:#eceef3;
  --border-2:#f0f2f7;

  --accent:#6f77ff;
  --accent-ghost:#eef0ff;

  --radius:12px;
  --shadow:0 1px 2px rgba(0,0,0,.04);
  --shadow-lg:0 10px 30px rgba(0,0,0,.08);

  --icon-10:10px;
  --icon-12:12px;
  --icon-14:14px;

  /* Neumorph */
  --neu-raise: 6px 6px 14px rgba(0,0,0,.08), -6px -6px 14px rgba(255,255,255,.65);
  --neu-press: inset 6px 6px 12px rgba(0,0,0,.08), inset -6px -6px 12px rgba(255,255,255,.65);

  /* Layout */
  --sidebar:300px;
  --gutter:14px;

  /* Focus ring */
  --ring:0 0 0 4px color-mix(in srgb,var(--accent) 22%, transparent);
}

/* ---------- Tamsi tema ---------- */
[data-theme="dark"]{
  --bg-primary:#0e1116;
  --bg-secondary:#141924;
  --bg-elev:#192233;

  --text-primary:#eef0f3;
  --text-secondary:#c9cdd6;
  --text-muted:#a1a7b1;

  --border:#283143;
  --border-2:#20283a;

  --accent:#8a96ff;
  --accent-ghost:#1b2035;

  --neu-raise: 6px 6px 14px rgba(0,0,0,.55), -6px -6px 14px rgba(255,255,255,.06);
  --neu-press: inset 6px 6px 12px rgba(0,0,0,.55), inset -6px -6px 12px rgba(255,255,255,.06);
}

/* ---------- Bazė ---------- */
body{background:var(--bg-primary);color:var(--text-primary);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",system-ui,sans-serif;line-height:1.55;overflow:hidden}
a,button,.btn,.chip,.tool,.model-pill,.lib-card,.project-item{transition:.15s ease}
button{background:none;border:0;color:inherit;cursor:pointer}
.hidden{display:none !important}

/* Accessible focus */
a:focus-visible,button:focus-visible,.chip:focus-visible,.btn:focus-visible,.tool:focus-visible,.model-pill:focus-visible{box-shadow:var(--ring)}

/* =========================================================
   TOPBAR
   ========================================================= */
.topbar{
  position:sticky; top:0; z-index:200;
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:10px;
  height:66px; padding:8px 14px;
  background:var(--bg-primary); backdrop-filter:blur(8px);
  /* be linijos viršuje */
  border-bottom:0;
  overflow:visible;
}

/* Logotipas – vienas, be rėmelių; auto swap pagal temą.
   Jei paliksi .webp – tamsiai temai pritaikys invert filtrą. */
.brand{display:flex;align-items:center}
.brand-icon{width:72px;height:auto;padding:0;border:0;background:transparent}
.brand-icon{content:url("/assets/icon/paule-logo-w.svg")}
[data-theme="dark"] .brand-icon{content:url("/assets/icon/paule-logo-b.svg")}
[data-theme="dark"] .brand-icon[src$=".webp"]{filter:brightness(0) invert(1)} /* fallback jei nepakeisi failo */

/* Modelių juosta */
.models-in-topbar{display:flex;gap:6px;justify-content:center;align-items:center;overflow-x:auto;scrollbar-width:thin;padding-block:2px}
.models-in-topbar::-webkit-scrollbar{height:6px}
.models-in-topbar::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
.model-pill{
  padding:6px 9px; font-size:11.5px; border-radius:999px; white-space:nowrap;
  color:var(--text-primary); background:var(--bg-secondary); box-shadow:var(--neu-raise);
}
.model-pill img{width:13px;height:13px}
.model-pill:hover{transform:translateY(-1px)}
.model-pill.active{background:var(--accent-ghost); color:var(--accent); box-shadow:var(--neu-press)}
/* „Auto“ prigesinti, kai aktyvus kitas */
.models-in-topbar:has(.model-pill.active:not([data-model="auto"])) .model-pill[data-model="auto"]{opacity:.45}

/* Dešinė */
.top-actions{display:flex;gap:6px;align-items:center}
.btn{display:inline-flex;align-items:center;gap:6px;padding:7px 10px;border-radius:10px;font-weight:600;background:var(--bg-secondary);color:var(--text-primary);box-shadow:var(--neu-raise)}
.btn img{width:var(--icon-12);height:var(--icon-12)}
.btn:hover{box-shadow:var(--neu-press)}
/* „Meniu“ desktop’e slepiam – mobile rodysim */
.top-actions .mobile-toggle{display:none}

/* =========================================================
   LAYOUT + SIDEBAR
   ========================================================= */
.layout{display:grid;grid-template-columns:var(--sidebar) 1fr;height:calc(100vh - 66px);overflow:hidden}
.sidebar{
  overflow:auto;background:var(--bg-primary);
  /* be linijos kairėje */
  border-right:0;
}
.side-section{padding:12px 14px /* be border-bottom */}
.side-title{font-size:10px;letter-spacing:.5px;text-transform:uppercase;color:var(--text-muted);margin-bottom:8px;font-weight:700}
.specialist-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px}

.chip{
  background:var(--bg-secondary);padding:7px 9px;border-radius:10px;font-size:12px;cursor:pointer;
  color:var(--text-secondary);box-shadow:var(--neu-raise);text-decoration:none;display:flex;align-items:center;gap:6px;font-weight:600
}
.chip img{width:var(--icon-12);height:var(--icon-12)}
.chip:hover{color:var(--accent);box-shadow:var(--neu-press)}

.community-pings{display:flex;flex-direction:column;gap:6px}
.ping{
  font-size:12px;color:var(--text-secondary);display:flex;gap:6px;align-items:center;padding:7px;border-radius:10px;
  background:var(--bg-secondary);box-shadow:var(--neu-raise)
}
.ping img{width:var(--icon-12);height:var(--icon-12)}

.lib-link{color:var(--text-secondary);text-decoration:none;font-weight:700}
.lib-link:hover{color:var(--accent)}
.library-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
.lib-card{
  display:flex;flex-direction:column;align-items:center;gap:6px;padding:8px 6px;border-radius:12px;
  background:var(--bg-secondary);text-decoration:none;color:var(--text-secondary);font-size:11px;font-weight:600;box-shadow:var(--neu-raise)
}
.lib-card img{width:30px;height:30px;object-fit:contain}
.lib-card:hover{transform:translateY(-1px);color:var(--accent);box-shadow:var(--neu-press)}

.project-item{display:flex;align-items:center;gap:8px;padding:9px;border-radius:10px;color:var(--text-secondary);cursor:pointer;font-weight:600;background:var(--bg-secondary);box-shadow:var(--neu-raise)}
.project-item img{width:var(--icon-12);height:var(--icon-12)}
.project-item:hover{color:var(--accent);box-shadow:var(--neu-press)}

/* =========================================================
   MAIN / CHAT
   ========================================================= */
.main{display:flex;flex-direction:column;overflow:hidden;background:var(--bg-primary)}
.chat-area{flex:1;overflow:auto;padding:18px;display:flex;flex-direction:column;gap:14px;padding-bottom:250px}
.hero-title{
  font-size:28px;line-height:1.2;margin:6px 0 6px;font-weight:800;text-align:center;
  background:linear-gradient(90deg,#0a0a0a 0%,var(--accent) 75%);-webkit-background-clip:text;background-clip:text;color:transparent
}
[data-theme="dark"] .hero-title{background:linear-gradient(90deg,#ffffff 0%,var(--accent) 65%);-webkit-background-clip:text;background-clip:text;color:transparent}
.welcome{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:22vh;text-align:center}
.welcome p{color:var(--text-secondary);margin-bottom:12px}
.welcome-actions{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
.welcome-btn{padding:8px 12px;border-radius:12px;cursor:pointer;font-size:12px;font-weight:600;display:flex;align-items:center;gap:6px;text-decoration:none;background:var(--bg-secondary);color:var(--text-primary);box-shadow:var(--neu-raise)}
.welcome-btn img{width:12px;height:12px}
.welcome-btn:hover{box-shadow:var(--neu-press)}
.community-strip{display:flex;gap:6px;flex-wrap:wrap;margin-top:10px;justify-content:center}
.strip-item{font-size:11.5px;color:var(--text-secondary);background:var(--bg-secondary);padding:6px 10px;border-radius:999px;box-shadow:var(--neu-raise)}

/* Po pirmos žinutės – paslepiam hero */
.chat-area:has(.message) #welcome{display:none}

/* Žinutės */
.message{display:flex;gap:10px;align-items:flex-start}
.avatar{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:var(--bg-secondary);box-shadow:var(--neu-raise)}
.avatar img{width:16px;height:16px}
.bubble{flex:1;max-width:78%}
.bubble-card{background:var(--bg-secondary);border-radius:14px;padding:12px;box-shadow:var(--neu-raise)}
.msg-content{max-height:210px;overflow:auto;font-size:14px}
.msg-content::-webkit-scrollbar{width:6px}
.msg-content::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
.msg-meta{display:flex;gap:6px;color:var(--text-muted);font-size:11.5px;margin-top:5px}
.model-tag{background:var(--bg-elev);padding:2px 7px;border-radius:8px}

/* Model tint kairėje */
.bubble[data-model="chatgpt"] .bubble-card{border-left:3px solid color-mix(in srgb,#10b981 45%, transparent)}
.bubble[data-model="claude"] .bubble-card{border-left:3px solid color-mix(in srgb,#f59e0b 45%, transparent)}
.bubble[data-model="gemini"] .bubble-card{border-left:3px solid color-mix(in srgb,#4285f4 45%, transparent)}
.bubble[data-model="grok"]   .bubble-card{border-left:3px solid color-mix(in srgb,#111 35%, transparent)}
.bubble[data-model="deepseek"] .bubble-card{border-left:3px solid color-mix(in srgb,#8B5E3C 45%, transparent)}
.bubble[data-model="llama"] .bubble-card{border-left:3px solid color-mix(in srgb,#9333EA 45%, transparent)}

@supports not (color: color-mix(in srgb, #000 50%, #fff 50%)){
  .bubble[data-model="chatgpt"] .bubble-card{ border-left:3px solid #10b98133 }
  .bubble[data-model="claude"] .bubble-card{ border-left:3px solid #f59e0b33 }
  .bubble[data-model="gemini"] .bubble-card{ border-left:3px solid #4285f433 }
  .bubble[data-model="grok"]   .bubble-card{ border-left:3px solid #11111133 }
  .bubble[data-model="deepseek"] .bubble-card{ border-left:3px solid #8B5E3C33 }
  .bubble[data-model="llama"] .bubble-card{ border-left:3px solid #9333EA33 }
}

/* Apsauga nuo „gigantiškų“ SVG chate */
.chat-area img[src$=".svg"]{max-width:40px;max-height:40px;width:auto;height:auto;object-fit:contain}

/* =========================================================
   BOTTOM INPUT (pririštas prie MAIN, nekerta sidebar)
   ========================================================= */
.bottom-section{
  position:fixed; bottom:12px; z-index:300;
  left: calc(var(--sidebar) + var(--gutter)); right: var(--gutter); width:auto; transform:none;
  background:var(--bg-primary); backdrop-filter:blur(8px); border-radius:16px; box-shadow:var(--shadow-lg); border:0;
}
.input-bar{padding:12px 14px /* no bottom border */}
.input-container{
  display:flex; align-items:center; gap:8px; border-radius:14px; padding:8px 10px;
  background:var(--bg-secondary); box-shadow:var(--neu-raise)
}
.message-input{flex:1;border:none;background:transparent;outline:none;max-height:110px;color:var(--text-primary);font-size:15px}
.send-btn{
  width:38px;height:38px;border-radius:50%; background:var(--accent); color:#fff;
  display:flex;align-items:center;justify-content:center; box-shadow:var(--neu-raise)
}
.send-btn img{width:18px;height:18px;filter:invert(1)}
.tools-bar{padding:7px 10px;display:flex;gap:6px;align-items:center;justify-content:center;overflow-x:auto;flex-wrap:wrap}
.tool{display:inline-flex;align-items:center;gap:5px;border-radius:10px;padding:4px 7px;font-size:10.5px;cursor:pointer;color:var(--text-muted);white-space:nowrap;font-weight:600;background:var(--bg-primary);box-shadow:var(--neu-raise)}
.tool img{width:var(--icon-12);height:var(--icon-12)}
.tool:hover{color:var(--accent);box-shadow:var(--neu-press)}

/* =========================================================
   ICONS: tamsiai temai pašviesinti visus UI .svg
   ========================================================= */
:root{ --ui-icon-filter:none }
[data-theme="dark"]{ --ui-icon-filter:brightness(0) invert(1) contrast(1.05) }
[data-theme="dark"] .btn img,
[data-theme="dark"] .tool img,
[data-theme="dark"] .ping img,
[data-theme="dark"] .lib-card img,
[data-theme="dark"] .welcome-btn img,
[data-theme="dark"] .avatar img,
[data-theme="dark"] .send-btn img,
[data-theme="dark"] .model-pill img,
[data-theme="dark"] .popup-head h2 img,
[data-theme="dark"] .popup-close img{ filter:var(--ui-icon-filter) }

/* =========================================================
   URL POPUP (įsk. #auth) – švarus, neu kortelė
   ========================================================= */
.popup{position:fixed;inset:0;display:none;background:rgba(0,0,0,.6);backdrop-filter:blur(8px);z-index:3000}
.popup:target{display:block}
.popup-body{position:absolute;inset:0;display:flex;flex-direction:column;max-width:min(1100px,92vw);margin:auto;padding:20px}
.popup-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.popup-head h2{display:flex;align-items:center;gap:10px;color:#fff;font-size:20px;font-weight:800}
.popup-head h2 img,.popup-close img{filter:invert(1)}
.popup-close{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:10px;background:rgba(255,255,255,.08)}
.popup-content{
  flex:1;border-radius:16px;background:var(--bg-primary);color:var(--text-primary);padding:16px;overflow:auto;
  box-shadow:var(--neu-raise); max-width:520px; margin:auto;
}
#auth .btn{background:var(--bg-secondary);box-shadow:var(--neu-raise)}
#auth .btn:hover{box-shadow:var(--neu-press)}

/* =========================================================
   PROFILIO DROPDOWN
   ========================================================= */
.user-profile{position:relative;display:flex;align-items:center;gap:8px;padding:6px 10px;border-radius:10px;cursor:pointer;background:var(--bg-secondary);box-shadow:var(--neu-raise)}
.user-avatar{width:22px;height:22px;border-radius:50%;background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700}
.user-name{font-weight:600;font-size:12px}
.profile-dropdown{position:absolute;top:100%;right:0;margin-top:8px;min-width:320px;padding:8px;background:var(--bg-primary);border-radius:14px;box-shadow:var(--shadow-lg);opacity:0;visibility:hidden;transform:translateY(-6px);transition:.2s;max-height:70vh;overflow:auto}
.user-profile:hover .profile-dropdown{opacity:1;visibility:visible;transform:translateY(0)}
.dropdown-item{display:flex;align-items:center;gap:8px;padding:8px;border-radius:10px;color:var(--text-primary)}
.dropdown-item:hover{background:var(--bg-secondary)}
.dropdown-divider{height:1px;background:var(--border);margin:6px 0}
.profile-controls{display:flex;gap:8px;margin-left:auto}
.select{border:1px solid var(--border);background:var(--bg-secondary);color:var(--text-primary);border-radius:10px;padding:5px 7px;font-size:12px}

/* =========================================================
   RESPONSIVE
   ========================================================= */
@media (max-width:1400px){
  .chat-area{padding-bottom:250px}
}
@media (max-width:1280px){
  :root{ --sidebar:260px }
}
@media (max-width:1024px){
  .layout{grid-template-columns:0 1fr}
  .sidebar{position:fixed;left:-320px;top:66px;width:300px;height:calc(100vh - 66px);z-index:180;transition:left .25s ease;background:var(--bg-primary)}
  .sidebar.open{left:0}
  .bottom-section{left:var(--gutter);right:var(--gutter)}
  .top-actions .mobile-toggle{display:inline-flex}
}

/* =========================================================
   SMULKŪS PRIEDAI
   ========================================================= */
.models-in-topbar img,.chip img,.tool img,.ping img,.project-item img,.welcome-btn img{width:var(--icon-12);height:var(--icon-12)}
.library-grid .lib-card img{width:30px;height:30px}
.hero-title{margin-top:6px}

