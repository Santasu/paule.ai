/* =========================================================
   Paule – Premium Chat UI
   Šviesi / tamsi tema, soft 3D (neumorph), borderless,
   stabilus topbar, sidebar vietoje, mobile sheet.
   ========================================================= */

/* ---------- Reset ---------- */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;min-height:100vh}
img{max-width:100%;height:auto;display:block}
:focus-visible{outline:none}

/* ---------- Paletė (šviesi) ---------- */
:root{
  --bg-primary:#ffffff;
  --bg-secondary:#f7f7f9;
  --bg-elev:#f2f3f7;

  --text-primary:#13151a;
  --text-secondary:#4b5160;
  --text-muted:#9aa0a8;

  --border:#eceef3;
  --border-2:#f0f2f7;

  --accent:#6f77ff;
  --accent-ghost:#eef0ff;

  --radius:12px;

  /* Neumorph / šešėliai */
  --shadow:0 1px 2px rgba(0,0,0,.04);
  --shadow-md:0 8px 24px rgba(0,0,0,.08);
  --shadow-lg:0 18px 60px rgba(0,0,0,.12);
  --neu-raise: 8px 8px 22px rgba(0,0,0,.10), -8px -8px 22px rgba(255,255,255,.70);
  --neu-press: inset 8px 8px 18px rgba(0,0,0,.12), inset -8px -8px 18px rgba(255,255,255,.70);

  /* Layout */
  --sidebar:300px;
  --gutter:14px;

  /* Focus ring */
  --ring:0 0 0 4px color-mix(in srgb,var(--accent) 22%, transparent);
}

/* ---------- Tamsi tema ---------- */
[data-theme="dark"]{
  --bg-primary:#0f1218;
  --bg-secondary:#141924;
  --bg-elev:#1a2131;

  --text-primary:#f3f5f9;
  --text-secondary:#ccd2dd;
  --text-muted:#aab2c2;

  --border:#253049;
  --border-2:#20283a;

  --accent:#8a96ff;
  --accent-ghost:#1b2035;

  --shadow:0 1px 2px rgba(0,0,0,.35);
  --shadow-md:0 10px 28px rgba(0,0,0,.55);
  --shadow-lg:0 28px 70px rgba(0,0,0,.60);
  --neu-raise: 10px 10px 26px rgba(0,0,0,.60), -10px -10px 26px rgba(255,255,255,.06);
  --neu-press: inset 10px 10px 22px rgba(0,0,0,.60), inset -10px -10px 22px rgba(255,255,255,.06);
}

/* ---------- Bazė ---------- */
body{
  background:var(--bg-primary);
  color:var(--text-primary);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",system-ui,sans-serif;
  line-height:1.55;
  overflow:hidden;
}
a,button,.btn,.chip,.tool,.model-pill,.lib-card,.project-item{transition:.15s ease}
button{background:none;border:0;color:inherit;cursor:pointer}
.hidden{display:none !important}
a:focus-visible,button:focus-visible,.chip:focus-visible,.btn:focus-visible,.tool:focus-visible,.model-pill:focus-visible{box-shadow:var(--ring)}

/* =========================================================
   TOPBAR
   ========================================================= */
.topbar{
  position:sticky; top:0; z-index:300;
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:12px;
  height:64px; padding:8px 14px;
  background:var(--bg-primary); backdrop-filter:blur(8px);
}
.brand{display:flex;align-items:center}
.brand-icon{width:96px;height:auto;display:block}
.models-in-topbar{display:flex;gap:6px;justify-content:center;align-items:center;overflow-x:auto;scrollbar-width:thin;padding-block:2px}
.models-in-topbar::-webkit-scrollbar{height:6px}
.models-in-topbar::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
.model-pill{
  padding:6px 9px; font-size:11.5px; border-radius:999px; white-space:nowrap;
  color:var(--text-primary); background:var(--bg-secondary); box-shadow:var(--neu-raise)
}
.model-pill img{width:14px;height:14px}
.model-pill:hover{transform:translateY(-1px)}
.model-pill.active{background:var(--accent-ghost); color:var(--accent); box-shadow:var(--neu-press)}
.models-in-topbar:has(.model-pill.active:not([data-model="auto"])) .model-pill[data-model="auto"]{opacity:.45}

.top-actions{display:flex;gap:6px;align-items:center}
.btn{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;border-radius:12px;font-weight:600;background:var(--bg-secondary);color:var(--text-primary);box-shadow:var(--neu-raise)}
.btn img{width:14px;height:14px}
.btn:hover{box-shadow:var(--neu-press)}
.hide-on-mobile{display:block}
.top-actions .mobile-toggle{display:none}

/* Prisijungimo / temos dropdown bendri */
.login-anchor{position:relative}
.login-dropdown{
  position:absolute; right:0; top:calc(100% + 8px); display:none;
  width:240px; padding:10px; border:1px solid var(--border);
  background:var(--bg-primary); border-radius:12px; box-shadow:var(--shadow-lg); z-index:999
}
.login-dropdown.open{display:block}
.login-dropdown .btn{width:100%;justify-content:center;margin-bottom:6px}
.login-dropdown .btn:last-child{margin-bottom:0}

/* =========================================================
   LAYOUT + SIDEBAR
   ========================================================= */
.layout{display:grid;grid-template-columns:var(--sidebar) 1fr;height:calc(100vh - 64px);overflow:hidden}
.sidebar{
  overflow:auto;background:var(--bg-primary);
  border-right:0;padding-top:6px
}
.side-section{padding:12px 14px}
.side-title{font-size:10px;letter-spacing:.5px;text-transform:uppercase;color:var(--text-muted);margin-bottom:8px;font-weight:700}
.specialist-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px}

.chip{
  background:var(--bg-secondary);padding:9px 10px;border-radius:12px;font-size:12px;cursor:pointer;
  color:var(--text-secondary);box-shadow:var(--neu-raise);text-decoration:none;display:flex;align-items:center;gap:6px;font-weight:700
}
.chip img{width:14px;height:14px}
.chip:hover{color:var(--accent);box-shadow:var(--neu-press)}

.community-pings{display:flex;flex-direction:column;gap:6px}
.ping{
  font-size:12px;color:var(--text-secondary);display:flex;gap:6px;align-items:center;padding:9px;border-radius:12px;
  background:var(--bg-secondary);box-shadow:var(--neu-raise)
}
.ping img{width:14px;height:14px}

.lib-link{color:var(--text-secondary);text-decoration:none;font-weight:800}
.lib-link:hover{color:var(--accent)}
.library-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}

/* Didesnės thumb miniatiūros */
.library-grid.thumbs .lib-card{padding:10px;border-radius:14px}
.lib-card.thumb{display:flex;flex-direction:column;align-items:center;gap:8px;background:var(--bg-secondary);color:var(--text-secondary);font-size:11.5px;font-weight:700;box-shadow:var(--neu-raise);text-decoration:none}
.lib-card.thumb img{width:76px;height:76px;object-fit:cover;border-radius:12px;border:1px solid var(--border)}
.lib-card:hover{transform:translateY(-1px);color:var(--accent);box-shadow:var(--neu-press)}

.project-item{display:flex;align-items:center;gap:8px;padding:10px;border-radius:12px;color:var(--text-secondary);cursor:pointer;font-weight:700;background:var(--bg-secondary);box-shadow:var(--neu-raise)}
.project-item img{width:14px;height:14px}
.project-item:hover{color:var(--accent);box-shadow:var(--neu-press)}

/* =========================================================
   MAIN / CHAT
   ========================================================= */
.main{display:flex;flex-direction:column;overflow:hidden;background:var(--bg-primary)}
.chat-area{
  flex:1;overflow:auto;padding:18px;display:flex;flex-direction:column;gap:14px;
  padding-bottom:280px /* vietos apatinei juostai */
}
.hero-title{
  font-size:28px;line-height:1.2;margin:4px 0 6px;font-weight:900;text-align:center;
  background:linear-gradient(90deg,#0a0a0a 0%,var(--accent) 75%);-webkit-background-clip:text;background-clip:text;color:transparent
}
[data-theme="dark"] .hero-title{background:linear-gradient(90deg,#ffffff 0%,var(--accent) 65%);-webkit-background-clip:text;background-clip:text;color:transparent}
.welcome{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:22vh;text-align:center}
.welcome p{color:var(--text-secondary);margin-bottom:12px}
.community-strip{display:flex;gap:6px;flex-wrap:wrap;margin-top:10px;justify-content:center}
.strip-item{font-size:11.5px;color:var(--text-secondary);background:var(--bg-secondary);padding:6px 10px;border-radius:999px;box-shadow:var(--neu-raise)}

.welcome-grid{
  display:grid; grid-template-columns: repeat(3, minmax(220px, 1fr));
  gap:14px; width:min(1100px, 98%); margin:12px auto 4px;
}
.welcome-card{position:relative;display:block;border-radius:16px;overflow:hidden;background:var(--bg-secondary);box-shadow:var(--neu-raise);text-decoration:none}
.welcome-card img{width:100%;height:160px;object-fit:cover;object-position:center 60%}
.welcome-card::after{content:"";position:absolute;inset:0;background:linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,0) 55%);pointer-events:none}
[data-theme="dark"] .welcome-card::after{background:linear-gradient(to top, rgba(0,0,0,.65), rgba(0,0,0,0) 60%)}
.welcome-card b{position:absolute;left:12px;bottom:22px;color:#fff;font-size:15px;font-weight:900;letter-spacing:.2px;text-shadow:0 2px 12px rgba(0,0,0,.45)}
.welcome-card span{position:absolute;left:12px;bottom:8px;color:#fff;font-size:12px;opacity:.95;text-shadow:0 2px 12px rgba(0,0,0,.45)}
.welcome-card:hover{transform:translateY(-2px);box-shadow:var(--neu-press)}

/* Po pirmos žinutės – paslepiam hero */
.chat-area:has(.message) #welcome{display:none}

/* Žinutės */
.message{display:flex;gap:10px;align-items:flex-start}
.avatar{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:var(--bg-secondary);box-shadow:var(--neu-raise)}
.avatar img{width:16px;height:16px}

/* Burbulas */
.message .bubble{flex:1;max-width:78%}
.bubble-card{
  background:var(--bg-secondary);border-radius:14px;padding:12px;box-shadow:var(--neu-raise);
  color:var(--text-primary)
}
.msg-content{max-height:230px;overflow:auto;font-size:14.5px}
.msg-meta{display:flex;gap:6px;color:var(--text-muted);font-size:11.5px;margin-top:6px}
.model-tag{background:var(--bg-elev);padding:2px 7px;border-radius:8px}

/* Vartotojo žinutės – prispaustos prie dešinio krašto */
.message.user{justify-content:flex-end}
.message.user .bubble{max-width:72%;margin-left:auto}
.message.user .bubble-card{border-top-right-radius:18px;border-bottom-right-radius:8px}

/* Model tint kairėje (asistentas) */
.bubble[data-model="chatgpt"] .bubble-card{border-left:3px solid color-mix(in srgb,#10b981 45%, transparent)}
.bubble[data-model="claude"] .bubble-card{border-left:3px solid color-mix(in srgb,#f59e0b 45%, transparent)}
.bubble[data-model="gemini"] .bubble-card{border-left:3px solid color-mix(in srgb,#4285f4 45%, transparent)}
.bubble[data-model="grok"]   .bubble-card{border-left:3px solid color-mix(in srgb,#111 35%, transparent)}
.bubble[data-model="deepseek"] .bubble-card{border-left:3px solid color-mix(in srgb,#8B5E3C 45%, transparent)}
.bubble[data-model="llama"] .bubble-card{border-left:3px solid color-mix(in srgb,#9333EA 45%, transparent)}

@supports not (color: color-mix(in srgb, #000 50%, #fff 50%)){
  .bubble[data-model="chatgpt"] .bubble-card{ border-left:3px solid #10b98133 }
  .bubble[data-model="claude"] .bubble-card{ border-left:3px solid #f59e0b33 }
  .bubble[data-model="gemini"] .bubble-card{ border-left:3px solid #4285f433 }
  .bubble[data-model="grok"]   .bubble-card{ border-left:3px solid #11111133 }
  .bubble[data-model="deepseek"] .bubble-card{ border-left:3px solid #8B5E3C33 }
  .bubble[data-model="llama"] .bubble-card{ border-left:3px solid #9333EA33 }
}

/* Apsauga nuo gigantiškų SVG */
.chat-area img[src$=".svg"]{max-width:40px;max-height:40px;width:auto;height:auto;object-fit:contain}

/* Sprendimų juosta */
.decision-bar{position:sticky;top:72px;z-index:5;display:flex;gap:10px;justify-content:center;margin:8px 0 14px}
.decision-chip{
  display:flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid var(--border);
  background:var(--bg-primary);cursor:pointer;user-select:none;box-shadow:var(--shadow-md)
}
.decision-chip:hover{transform:translateY(-1px)}

/* =========================================================
   BOTTOM INPUT
   ========================================================= */
.bottom-section{
  position:fixed; bottom:12px; z-index:350;
  left: calc(var(--sidebar) + var(--gutter)); right: var(--gutter); width:auto;
  background:var(--bg-primary); backdrop-filter:blur(8px); border-radius:16px; box-shadow:var(--shadow-lg); border:0;
}
.input-bar{padding:12px 14px}
.input-container{
  display:flex; align-items:center; gap:8px; border-radius:14px; padding:8px 10px;
  background:var(--bg-secondary); box-shadow:var(--neu-raise)
}
.message-input{flex:1;border:none;background:transparent;outline:none;max-height:110px;color:var(--text-primary);font-size:15px}
.send-btn{
  width:42px;height:42px;border-radius:50%; background:var(--accent); color:#fff;
  display:flex;align-items:center;justify-content:center; box-shadow:var(--neu-raise)
}
.send-btn img{width:18px;height:18px;filter:invert(1)}
.tools-bar{padding:7px 10px;display:flex;gap:6px;align-items:center;justify-content:center;overflow-x:auto;flex-wrap:wrap}
.tool{display:inline-flex;align-items:center;gap:5px;border-radius:10px;padding:6px 9px;font-size:11.5px;cursor:pointer;color:var(--text-muted);white-space:nowrap;font-weight:700;background:var(--bg-primary);box-shadow:var(--neu-raise)}
.tool img{width:14px;height:14px}
.tool:hover{color:var(--accent);box-shadow:var(--neu-press)}

/* =========================================================
   ICONS: balinamos tik .ui-icon (ne nuotraukos)
   ========================================================= */
.ui-icon{filter:none}
[data-theme="dark"] .ui-icon{filter:brightness(0) invert(1) contrast(1.05)}
/* Nuotraukos/hero niekada neinvertuojamos */

/* =========================================================
   MOBILE SHEET
   ========================================================= */
.mobile-backdrop{
  position:fixed;inset:0;background:rgba(0,0,0,.5);backdrop-filter:blur(2px);
  opacity:0;visibility:hidden;transition:.2s;z-index:420
}
.mobile-backdrop.open{opacity:1;visibility:visible}
.mobile-sheet{
  position:fixed;left:-100%;top:64px;bottom:0;width:min(480px,90vw);background:var(--bg-primary);
  box-shadow:var(--shadow-lg);z-index:430;border-top-right-radius:14px;border-bottom-right-radius:14px;
  transition:left .25s ease; overflow:auto; padding:14px
}
.mobile-sheet.open{left:0}
.sheet-body{display:flex;flex-direction:column;gap:14px}
.sheet-tile{display:flex;align-items:center;gap:10px;padding:14px;border-radius:16px;background:var(--bg-secondary);box-shadow:var(--neu-raise);text-decoration:none;color:var(--text-primary);font-weight:800}
.sheet-block{background:transparent}
.sheet-row{display:flex;gap:8px}

/* =========================================================
   RESPONSIVE
   ========================================================= */
@media (max-width:1280px){
  :root{ --sidebar:260px }
}
@media (max-width:1024px){
  .layout{grid-template-columns:0 1fr}
  .sidebar{display:none}
  .bottom-section{left:var(--gutter);right:var(--gutter)}
  .top-actions .mobile-toggle{display:inline-flex}
  .hide-on-mobile{display:none}
}
@media (max-width:900px){
  .welcome-grid{ grid-template-columns: repeat(2, minmax(160px, 1fr)); }
  .welcome-card img{ height:150px; }
}
@media (max-width:520px){
  .welcome-grid{ grid-template-columns: 1fr; }
  .welcome-card img{ height:180px; }
}

/* Smulkūs */
.top-actions a { text-decoration: none; }
