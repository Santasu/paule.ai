/* =========================================================
   Paule – Premium Chat UI
   Šviesi / tamsi tema, mažesnės ikonėlės, soft 3D (neumorph),
   borderless layout, responsive bottom input
   ========================================================= */

/* ---------- Reset ---------- */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;min-height:100vh}
img,svg{max-width:100%;height:auto;display:block}
:focus-visible{outline:none}

/* ---------- Paletė (šviesi) ---------- */
:root{
  --bg-primary:#ffffff;
  --bg-secondary:#f7f7f9;
  --bg-elev:#f2f3f7;

  --text-primary:#13151a;
  --text-secondary:#535666;
  --text-muted:#9aa0a8;

  --border:#eceef3;
  --border-2:#f0f2f7;

  --accent:#6f77ff;
  --accent-ghost:#eef0ff;

  --radius:12px;
  --shadow:0 1px 2px rgba(0,0,0,.04);
  --shadow-lg:0 10px 30px rgba(0,0,0,.08);

  --icon-10:10px;
  --icon-12:12px;
  --icon-14:14px;

  /* Neumorph */
  --neu-raise: 6px 6px 14px rgba(0,0,0,.08), -6px -6px 14px rgba(255,255,255,.65);
  --neu-press: inset 6px 6px 12px rgba(0,0,0,.08), inset -6px -6px 12px rgba(255,255,255,.65);

  /* Layout */
  --sidebar:300px;
  --gutter:14px;

  /* Focus ring */
  --ring:0 0 0 4px color-mix(in srgb,var(--accent) 22%, transparent);
}

/* ---------- Tamsi tema ---------- */
[data-theme="dark"]{
  --bg-primary:#0e1116;
  --bg-secondary:#141924;
  --bg-elev:#192233;

  --text-primary:#eef0f3;
  --text-secondary:#c9cdd6;
  --text-muted:#a1a7b1;

  --border:#283143;
  --border-2:#20283a;

  --accent:#8a96ff;
  --accent-ghost:#1b2035;

  --neu-raise: 6px 6px 14px rgba(0,0,0,.55), -6px -6px 14px rgba(255,255,255,.06);
  --neu-press: inset 6px 6px 12px rgba(0,0,0,.55), inset -6px -6px 12px rgba(255,255,255,.06);
}

/* ---------- Bazė ---------- */
body{
  background:var(--bg-primary);
  color:var(--text-primary);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",system-ui,sans-serif;
  line-height:1.55;
  overflow:hidden;
}
a,button,.btn,.chip,.tool,.model-pill,.lib-card,.project-item{transition:.15s ease}
button{background:none;border:0;color:inherit;cursor:pointer}
.hidden{display:none !important}

/* Accessible focus */
a:focus-visible,button:focus-visible,.chip:focus-visible,.btn:focus-visible,.tool:focus-visible,.model-pill:focus-visible{box-shadow:var(--ring)}

/* =========================================================
   TOPBAR
   ========================================================= */
.topbar{
  position:sticky; top:0; z-index:200;
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:10px;
  height:66px; padding:8px 14px;
  background:var(--bg-primary); backdrop-filter:blur(8px);
  border-bottom:0;
  overflow:visible;
}

/* Logotipas (inline SVG) */
.brand{display:flex;align-items:center}
.brand .logo-svg{width:2.7cm;height:auto;display:block;color:var(--text-primary)}
[data-theme="dark"] .brand .logo-svg{color:#fff}

/* Modelių juosta */
.models-in-topbar{display:flex;gap:6px;justify-content:center;align-items:center;overflow-x:auto;scrollbar-width:thin;padding-block:2px}
.models-in-topbar::-webkit-scrollbar{height:6px}
.models-in-topbar::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
.model-pill{
  padding:6px 9px; font-size:11.5px; border-radius:999px; white-space:nowrap;
  color:var(--text-primary); background:var(--bg-secondary); box-shadow:var(--neu-raise);
}
.model-pill img{width:13px;height:13px}            /* mažesnės viršuje */
.model-pill:hover{transform:translateY(-1px)}
.model-pill.active{background:var(--accent-ghost); color:var(--accent); box-shadow:var(--neu-press)}
.models-in-topbar:has(.model-pill.active:not([data-model="auto"])) .model-pill[data-model="auto"]{opacity:.45}

/* Dešinė */
.top-actions{display:flex;gap:6px;align-items:center}
.btn{display:inline-flex;align-items:center;gap:6px;padding:7px 10px;border-radius:10px;font-weight:600;background:var(--bg-secondary);color:var(--text-primary);box-shadow:var(--neu-raise)}
.btn img{width:var(--icon-12);height:var(--icon-12)}
.btn:hover{box-shadow:var(--neu-press)}
.top-actions .mobile-toggle{display:none}

/* =========================================================
   LAYOUT + SIDEBAR
   ========================================================= */
.layout{display:grid;grid-template-columns:var(--sidebar) 1fr;height:calc(100vh - 66px);overflow:hidden}
.sidebar{
  overflow:auto;background:var(--bg-primary);
  border-right:0;
}
.side-section{padding:12px 14px}
.side-title{font-size:10px;letter-spacing:.5px;text-transform:uppercase;color:var(--text-muted);margin-bottom:8px;font-weight:700}
.specialist-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px}

.chip{
  background:var(--bg-secondary);padding:7px 9px;border-radius:10px;font-size:12px;cursor:pointer;
  color:var(--text-secondary);box-shadow:var(--neu-raise);text-decoration:none;display:flex;align-items:center;gap:6px;font-weight:600
}
.chip img{width:var(--icon-12);height:var(--icon-12)}
.chip:hover{color:var(--accent);box-shadow:var(--neu-press)}

.community-pings{display:flex;flex-direction:column;gap:6px}
.ping{
  font-size:12px;color:var(--text-secondary);display:flex;gap:6px;align-items:center;padding:7px;border-radius:10px;
  background:var(--bg-secondary);box-shadow:var(--neu-raise)
}
.ping img{width:var(--icon-12);height:var(--icon-12)}

.lib-link{color:var(--text-secondary);text-decoration:none;font-weight:700}
.lib-link:hover{color:var(--accent)}
.library-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
.lib-card{
  display:flex;flex-direction:column;align-items:center;gap:6px;padding:8px 6px;border-radius:12px;
  background:var(--bg-secondary);text-decoration:none;color:var(--text-secondary);font-size:11px;font-weight:600;box-shadow:var(--neu-raise)
}
.lib-card img{width:30px;height:30px;object-fit:contain}
.lib-card:hover{transform:translateY(-1px);color:var(--accent);box-shadow:var(--neu-press)}

.project-item{display:flex;align-items:center;gap:8px;padding:9px;border-radius:10px;color:var(--text-secondary);cursor:pointer;font-weight:600;background:var(--bg-secondary);box-shadow:var(--neu-raise)}
.project-item img{width:var(--icon-12);height:var(--icon-12)}
.project-item:hover{color:var(--accent);box-shadow:var(--neu-press)}

/* =========================================================
   MAIN / CHAT
   ========================================================= */
.main{display:flex;flex-direction:column;overflow:hidden;background:var(--bg-primary)}
.chat-area{flex:1;overflow:auto;padding:18px;display:flex;flex-direction:column;gap:14px;padding-bottom:250px}
#chatArea{padding-top:3cm} /* 3 cm žemyn nuo viršaus */

.hero-title{
  font-size:28px;line-height:1.2;margin:6px 0 6px;font-weight:800;text-align:center;
  background:linear-gradient(90deg,#0a0a0a 0%,var(--accent) 75%);-webkit-background-clip:text;background-clip:text;color:transparent
}
[data-theme="dark"] .hero-title{background:linear-gradient(90deg,#ffffff 0%,var(--accent) 65%);-webkit-background-clip:text;background-clip:text;color:transparent}
.welcome{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:22vh;text-align:center}
.welcome p{color:var(--text-secondary);margin-bottom:12px}
.welcome-actions{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
.welcome-btn{padding:8px 12px;border-radius:12px;cursor:pointer;font-size:12px;font-weight:600;display:flex;align-items:center;gap:6px;text-decoration:none;background:var(--bg-secondary);color:var(--text-primary);box-shadow:var(--neu-raise)}
.welcome-btn img{width:12px;height:12px}
.welcome-btn:hover{box-shadow:var(--neu-press)}
.community-strip{display:flex;gap:6px;flex-wrap:wrap;margin-top:10px;justify-content:center}
.strip-item{font-size:11.5px;color:var(--text-secondary);background:var(--bg-secondary);padding:6px 10px;border-radius:999px;box-shadow:var(--neu-raise)}

/* Po pirmos žinutės – paslepiam hero */
.chat-area:has(.message) #welcome{display:none}

/* Žinutės */
.message{display:flex;gap:10px;align-items:flex-start}
.avatar{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:var(--bg-secondary);box-shadow:var(--neu-raise)}
.avatar img{width:14px;height:14px}               /* mažesnės prie burbulų */

/* Vartotojo žinutės – į dešinę */
.message.user{justify-content:flex-end;flex-direction:row-reverse}
.message.user .avatar{margin-left:8px;margin-right:0}
.message.user .bubble-card{background:var(--bg-secondary);box-shadow:var(--neu-raise)}
.message .bubble{flex:1;max-width:78%}
.bubble-card{background:var(--bg-secondary);border-radius:14px;padding:12px;box-shadow:var(--neu-raise)}
.msg-content{max-height:210px;overflow:auto;font-size:14px}
.msg-content::-webkit-scrollbar{width:6px}
.msg-content::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
.msg-meta{display:flex;gap:6px;color:var(--text-muted);font-size:11.5px;margin-top:5px}
.model-tag{background:var(--bg-elev);padding:2px 7px;border-radius:8px}

/* Model tint kairėje */
.bubble[data-model="chatgpt"] .bubble-card{border-left:3px solid color-mix(in srgb,#10b981 45%, transparent)}
.bubble[data-model="claude"] .bubble-card{border-left:3px solid color-mix(in srgb,#f59e0b 45%, transparent)}
.bubble[data-model="gemini"] .bubble-card{border-left:3px solid color-mix(in srgb,#4285f4 45%, transparent)}
.bubble[data-model="grok"]   .bubble-card{border-left:3px solid color-mix(in srgb,#111 35%, transparent)}
.bubble[data-model="deepseek"] .bubble-card{border-left:3px solid color-mix(in srgb,#8B5E3C 45%, transparent)}
.bubble[data-model="llama"] .bubble-card{border-left:3px solid color-mix(in srgb,#9333EA 45%, transparent)}

@supports not (color: color-mix(in srgb, #000 50%, #fff 50%)){
  .bubble[data-model="chatgpt"] .bubble-card{ border-left:3px solid #10b98133 }
  .bubble[data-model="claude"] .bubble-card{ border-left:3px solid #f59e0b33 }
  .bubble[data-model="gemini"] .bubble-card{ border-left:3px solid #4285f433 }
  .bubble[data-model="grok"]   .bubble-card{ border-left:3px solid #11111133 }
  .bubble[data-model="deepseek"] .bubble-card{ border-left:3px solid #8B5E3C33 }
  .bubble[data-model="llama"] .bubble-card{ border-left:3px solid #9333EA33 }
}

/* Apsauga nuo „gigantiškų“ SVG chate */
.chat-area img[src$=".svg"]{max-width:40px;max-height:40px;width:auto;height:auto;object-fit:contain}

/* =========================================================
   Sprendimų juosta (Ginčas / Teisėjas / Kompromisas)
   ========================================================= */
.decision-bar{position:sticky;top:72px;z-index:5;display:flex;gap:10px;justify-content:center;margin:8px 0 14px}
.decision-chip{
  display:flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid var(--border);
  background:var(--bg-primary);cursor:pointer;user-select:none;box-shadow:0 6px 24px rgba(0,0,0,.06);
  transition:transform .15s ease,box-shadow .15s ease
}
.decision-chip:hover{transform:translateY(-1px);box-shadow:0 10px 30px rgba(0,0,0,.10)}
.decision-chip img{width:18px;height:18px}
.decision-bar.boom .decision-chip{animation:pop .25s ease}
@keyframes pop{0%{transform:scale(.98)}100%{transform:scale(1)}}

/* =========================================================
   BOTTOM INPUT (nekerta sidebar)
   ========================================================= */
.bottom-section{
  position:fixed; bottom:12px; z-index:300;
  left: calc(var(--sidebar) + var(--gutter)); right: var(--gutter); width:auto;
  background:var(--bg-primary); backdrop-filter:blur(8px); border-radius:16px; box-shadow:var(--shadow-lg); border:0;
}
.input-bar{padding:12px 14px}
.input-container{
  display:flex; align-items:center; gap:8px; border-radius:14px; padding:8px 10px;
  background:var(--bg-secondary); box-shadow:var(--neu-raise)
}
.message-input{flex:1;border:none;background:transparent;outline:none;max-height:110px;color:var(--text-primary);font-size:15px}
.send-btn{
  width:38px;height:38px;border-radius:50%; background:var(--accent); color:#fff;
  display:flex;align-items:center;justify-content:center; box-shadow:var(--neu-raise)
}
.send-btn img{width:18px;height:18px;filter:invert(1)}
.tools-bar{padding:7px 10px;display:flex;gap:6px;align-items:center;justify-content:center;overflow-x:auto;flex-wrap:wrap}
.tool{display:inline-flex;align-items:center;gap:5px;border-radius:10px;padding:4px 7px;font-size:10.5px;cursor:pointer;color:var(--text-muted);white-space:nowrap;font-weight:600;background:var(--bg-primary);box-shadow:var(--neu-raise)}
.tool img{width:var(--icon-12);height:var(--icon-12)}
.tool:hover{color:var(--accent);box-shadow:var(--neu-press)}

/* =========================================================
   ICONS: tamsiai temai pašviesinti visus UI .svg
   ========================================================= */
:root{ --ui-icon-filter:none }
[data-theme="dark"]{ --ui-icon-filter:brightness(0) invert(1) contrast(1.05) }
[data-theme="dark"] .btn img,
[data-theme="dark"] .tool img,
[data-theme="dark"] .ping img,
[data-theme="dark"] .lib-card img,
[data-theme="dark"] .welcome-btn img,
[data-theme="dark"] .avatar img,
[data-theme="dark"] .send-btn img,
[data-theme="dark"] .model-pill img,
[data-theme="dark"] .popup-head h2 img,
[data-theme="dark"] .popup-close img{ filter:var(--ui-icon-filter) }

/* =========================================================
   URL POPUP – neu kortelė
   ========================================================= */
.popup{position:fixed;inset:0;display:none;background:rgba(0,0,0,.6);backdrop-filter:blur(8px);z-index:3000}
.popup:target{display:block}
.popup-body{position:absolute;inset:0;display:flex;flex-direction:column;max-width:min(1100px,92vw);margin:auto;padding:20px}
.popup-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.popup-head h2{display:flex;align-items:center;gap:10px;color:#fff;font-size:20px;font-weight:800}
.popup-head h2 img,.popup-close img{filter:invert(1)}
.popup-close{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:10px;background:rgba(255,255,255,.08)}
.popup-content{
  flex:1;border-radius:16px;background:var(--bg-primary);color:var(--text-primary);padding:16px;overflow:auto;
  box-shadow:var(--neu-raise); max-width:520px; margin:auto;
}

/* =========================================================
   PROFILIO DROPDOWN
   ========================================================= */
.user-profile{position:relative;display:flex;align-items:center;gap:8px;padding:6px 10px;border-radius:10px;cursor:pointer;background:var(--bg-secondary);box-shadow:var(--neu-raise)}
.user-avatar{width:22px;height:22px;border-radius:50%;background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700}
.user-name{font-weight:600;font-size:12px}
.profile-dropdown{position:absolute;top:100%;right:0;margin-top:8px;min-width:320px;padding:8px;background:var(--bg-primary);border-radius:14px;box-shadow:var(--shadow-lg);opacity:0;visibility:hidden;transform:translateY(-6px);transition:.2s;max-height:70vh;overflow:auto}
.user-profile:hover .profile-dropdown{opacity:1;visibility:visible;transform:translateY(0)}
.dropdown-item{display:flex;align-items:center;gap:8px;padding:8px;border-radius:10px;color:var(--text-primary)}
.dropdown-item:hover{background:var(--bg-secondary)}
.dropdown-divider{height:1px;background:var(--border);margin:6px 0}
.profile-controls{display:flex;gap:8px;margin-left:auto}
.select{border:1px solid var(--border);background:var(--bg-secondary);color:var(--text-primary);border-radius:10px;padding:5px 7px;font-size:12px}

/* =========================================================
   HERO: 6 kortelės
   ========================================================= */
.welcome { padding-top: 8px; }
.welcome-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(220px, 1fr));
  gap:14px;
  width:min(1100px, 98%);
  margin:12px auto 4px;
}
.welcome-card{
  position:relative;
  display:block;
  border-radius:16px;
  overflow:hidden;
  background:var(--bg-secondary);
  box-shadow:var(--neu-raise);
  text-decoration:none;
  transform:translateZ(0);
}
.welcome-card img{
  width:100%;
  height:160px;
  object-fit:cover;
  display:block;
  object-position:center 60%;
}
.welcome-card::after{
  content:"";
  position:absolute; inset:0;
  background:linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,0) 55%);
  pointer-events:none;
}
.welcome-card b{
  position:absolute; left:12px; bottom:22px;
  color:#fff; font-size:15px; font-weight:800; letter-spacing:.2px;
}
.welcome-card span{
  position:absolute; left:12px; bottom:8px;
  color:#fff; font-size:12px; opacity:.95;
}
.welcome-card:hover{ transform:translateY(-2px); box-shadow:var(--neu-press); }
[data-theme="dark"] .welcome-card::after{ background:linear-gradient(to top, rgba(0,0,0,.65), rgba(0,0,0,0) 60%); }

/* =========================================================
   RESPONSIVE
   ========================================================= */
@media (max-width:1400px){
  .chat-area{padding-bottom:250px}
}
@media (max-width:1280px){
  :root{ --sidebar:260px }
}
@media (max-width:1024px){
  .layout{grid-template-columns:0 1fr}
  .sidebar{position:fixed;left:-320px;top:66px;width:300px;height:calc(100vh - 66px);z-index:180;transition:left .25s ease;background:var(--bg-primary)}
  .sidebar.open{left:0}
  .bottom-section{left:var(--gutter);right:var(--gutter)}
  .top-actions .mobile-toggle{display:inline-flex}
}
@media (max-width: 900px){
  .welcome-grid{ grid-template-columns: repeat(2, minmax(160px, 1fr)); }
  .welcome-card img{ height:150px; }
}
@media (max-width: 520px){
  .welcome-grid{ grid-template-columns: 1fr; }
  .welcome-card img{ height:180px; }
}

/* =========================================================
   SMULKŪS PRIEDAI
   ========================================================= */
/* Bendruomenės nuoroda viršuje be pabraukimo */
.top-actions a { text-decoration: none; }
/* Vienodi mygtukų dydžiai */
.top-actions .btn,
.top-actions a.btn,
.top-actions a.btn:link,
.top-actions a.btn:visited{
  text-decoration: none;
  font-size: 12.5px;
  line-height: 1;
  padding: 8px 12px;
}
/* ==================== PAULE – APPEND PATCH ==================== */

/* 1) Stipresnis „neumorph“ (abiem temoms) */
:root{
  --shadow-lg: 0 16px 60px rgba(0,0,0,.14);
  --neu-raise: 8px 8px 22px rgba(0,0,0,.10), -8px -8px 22px rgba(255,255,255,.70);
  --neu-press: inset 8px 8px 18px rgba(0,0,0,.12), inset -8px -8px 18px rgba(255,255,255,.70);
}
[data-theme="dark"]{
  --shadow-lg: 0 20px 70px rgba(0,0,0,.55);
  --neu-raise: 10px 10px 26px rgba(0,0,0,.60), -10px -10px 26px rgba(255,255,255,.06);
  --neu-press: inset 10px 10px 22px rgba(0,0,0,.60), inset -10px -10px 22px rgba(255,255,255,.06);
  --text-primary:#f5f7fb;
  --text-secondary:#cfd5e3;
  --text-muted:#aeb6c7;
}

/* 2) Ikonos ir tekstas – balti tamsioje temoje */
:root{ --ui-icon-filter:none }
[data-theme="dark"]{
  /* visoms png/svg ikonoms */
  --ui-icon-filter: invert(1) brightness(1.1) contrast(1.05) saturate(0);
}
.ui-icon{ filter: var(--ui-icon-filter); }

/* inline SVG’ams – paveldėtas baltumas */
[data-theme="dark"] svg{ color:#fff; }
[data-theme="dark"] svg [fill]:not([fill="none"]){ fill:currentColor !important; }
[data-theme="dark"] svg [stroke]:not([stroke="none"]){ stroke:currentColor !important; }

/* 3) Viršutinės juostos mygtukų suvienodinimas (sutvarko tavo netyčinę string eilutę) */
.top-actions .btn,
.top-actions a.btn,
.top-actions a.btn:link,
.top-actions a.btn:visited{
  text-decoration:none;
  font-size:12.5px;
  line-height:1;
  padding:8px 12px;
}

/* 4) Prisijungti / Tema dropdown’ai (jei dar neturi šių klasių) */
.login-anchor{ position:relative; }
.login-dropdown{
  position:absolute; right:0; top:calc(100% + 8px);
  width:240px; padding:10px;
  background:var(--bg-primary); border:1px solid var(--border); border-radius:12px;
  box-shadow: var(--shadow-lg); display:none; z-index:300;
}
.login-dropdown.open{ display:block; }
.login-dropdown .btn{ width:100%; justify-content:center; gap:8px; margin-bottom:6px; }
.login-dropdown .btn:last-child{ margin-bottom:0; }

/* 5) „Trenkės“ (boom) jausmas sprendimų juostai ir mygtukams */
.decision-chip{ box-shadow: var(--shadow-lg); }
.decision-chip:active{ transform: scale(.98); }
.btn:active{ transform: translateY(1px); }

/* 6) Žinutės burbulams – daugiau gylio (abiem pusėms) */
.bubble-card{
  box-shadow:
    0 12px 34px rgba(0,0,0,.10),
    0 2px 10px rgba(0,0,0,.05);
}
[data-theme="dark"] .bubble-card{
  box-shadow:
    0 22px 60px rgba(0,0,0,.55),
    0 4px 16px rgba(0,0,0,.35);
}

/* 7) Hero kortelėms – ryškesnis overlay naktį */
[data-theme="dark"] .welcome-card::after{
  background: linear-gradient(to top, rgba(0,0,0,.70), rgba(0,0,0,0) 62%);
}

/* 8) Logotipo IMG fallback (jei nenaudoji inline SVG):
   <img class="logo-img" src="/assets/icon/paule-logo.webp">
   JS gali perjungti src, bet jei norisi tik CSS – šita dalis neužtikrina swap,
   tik nustato dydį. */
.brand .logo-img{ width:2.7cm; height:auto; display:block; }

/* 9) Vartotojo burbuliukas – dar aiškiau dešinėje */
.message.user .bubble-card{
  border-top-right-radius:18px;
  border-bottom-right-radius:8px;
}

/* 10) Smulkūs UI suvienodinimai */
.btn, .chip, .tool{ box-shadow: var(--neu-raise); }
.btn:hover, .chip:hover, .tool:hover{ box-shadow: var(--neu-press); }

/* ================== END OF APPEND PATCH ================== */
