<!doctype html>
<html lang="lt">
<head>
  <meta charset="utf-8">
  <title>Paule – Admin / Status</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;padding:24px;max-width:880px;margin:auto}
    h1{margin:0 0 8px}
    code,pre{background:#f5f5f7;padding:2px 6px;border-radius:6px}
    .ok{color:#16a34a;font-weight:700}
    .bad{color:#dc2626;font-weight:700}
    .card{border:1px solid #e5e7eb;border-radius:12px;padding:16px;margin:14px 0}
    table{border-collapse:collapse;width:100%}
    td,th{padding:8px;border-bottom:1px solid #eee;text-align:left}
    .hint{color:#6b7280}
  </style>
</head>
<body>
  <h1>Paule – Admin / Status</h1>
  <p class="hint">API raktus <b>įvesk Vercel</b> projekte: <i>Settings → Environment Variables</i>. Šis puslapis tik parodo, ko trūksta.</p>

  <div id="status" class="card">Kraunama…</div>

  <div class="card">
    <h3>Tipiniai kintamieji (įrašyk Vercel'e)</h3>
    <table>
      <tr><th>Vardas</th><th>Naudojamas kam</th></tr>
      <tr><td><code>OPENAI_API_KEY</code></td><td>gpt-4o-mini</td></tr>
      <tr><td><code>ANTHROPIC_API_KEY</code></td><td>claude-4-sonnet</td></tr>
      <tr><td><code>TOGETHER_API_KEY</code></td><td>meta-llama / Scout</td></tr>
      <tr><td><code>XAI_API_KEY</code></td><td>grok-4</td></tr>
      <tr><td><code>GOOGLE_API_KEY</code></td><td>gemini-2.5-flash</td></tr>
      <tr><td><code>DEEPSEEK_API_KEY</code></td><td>deepseek-chat</td></tr>
      <tr><td><code>RUNWAY_API_KEY</code></td><td>Runway vaizdams/video</td></tr>
      <tr><td><code>SUNO_API_KEY</code></td><td>Suno muzikai</td></tr>
      <tr><td><code>FLUX_API_KEY</code></td><td>Flux/komiksams</td></tr>
    </table>
  </div>

  <script>
    (async () => {
      const tryUrls = [
        '/api/paule/v1/diagnostics',
        '/wp-json/paule/v1/diagnostics'
      ];
      let data=null, used=null;
      for (const u of tryUrls) {
        try {
          const r = await fetch(u);
          if (r.ok) { data = await r.json(); used = u; break; }
        } catch {}
      }
      const box = document.getElementById('status');
      if (!data) {
        box.innerHTML = 'Nepavyko pasiekti <code>/diagnostics</code>. Patikrink <code>vercel.json</code> maršrutus.';
        return;
      }
      const env = data.env_present || {};
      function chip(b){ return b ? '<span class="ok">●</span>' : '<span class="bad">●</span>'; }
      box.innerHTML = `
        <div>Diag URL: <code>${used}</code></div>
        <table style="margin-top:10px">
          <tr><th>Raktas</th><th>Yra?</th></tr>
          ${Object.keys(env).sort().map(k=>`<tr><td><code>${k}</code></td><td>${chip(env[k])}</td></tr>`).join('')}
        </table>
        <p class="hint">Modelių sąrašas: <code>${(data.endpoints?.models_api||[]).join(' , ')}</code></p>
      `;
    })();
  </script>
</body>
</html>

